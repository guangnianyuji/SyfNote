æœ‰äº›éœ€è¦ç»†çœ‹çš„çŸ¥è¯†ç‚¹è‡ªè¡Œæ€»ç»“ã€‚

[TOC]



# Introduction

### Definition

**å®šä¹‰**ï¼š

**A collection of autonomous computers interconnected by a single technology.**

Internetæ˜¯æŒ‡å› ç‰¹ç½‘ï¼ˆä¸“æœ‰åè¯ï¼‰ï¼Œæ˜¯internetçš„ä¸€ç§ã€‚é‡‡ç”¨TCP/IPåè®®ï¼Œç”±ä¼—å¤šç½‘ç»œç»„æˆï¼Œå…¨çƒå¯ä»¥è¿›è¡Œé€šä¿¡ã€‚

internetæ˜¯æŒ‡äº’è”ç½‘oräº’è¿ç½‘ã€‚è¿™é‡Œæ˜¯æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºè¿æ¥æ‰€ç»„æˆçš„è™šæ‹Ÿç½‘ç»œã€‚

## **åˆ†ç±»classification**ï¼š

### æŒ‰åˆ†å¸ƒèŒƒå›´åˆ†ç±»:by scale

- The Internet

- å¹¿åŸŸç½‘WANï¼šæ˜¯Internetçš„æ ¸å¿ƒéƒ¨åˆ† äº¤æ¢æŠ€æœ¯ (country / continent)

- åŸåŸŸç½‘MANï¼šmetropolitan area network

- å±€åŸŸç½‘LAN Local Area Network ï¼š**ä»¥å¤ªç½‘æŠ€æœ¯** **å¹¿æ’­æŠ€æœ¯** WIFI

  å±€åŸŸç½‘ä¸»è¦å·¥ä½œåœ¨data link layerâ€¦.

  å±€åŸŸç½‘æ˜¯æŒ‡åœ¨æŸä¸€åŒºåŸŸå†…ç”±å¤šå°è®¡ç®—æœºäº’è”æˆçš„è®¡ç®—æœºç»„ã€‚ä¸€èˆ¬æ˜¯æ–¹åœ†å‡ åƒç±³ä»¥å†…ã€‚å±€åŸŸç½‘å¯ä»¥å®ç°æ–‡ä»¶ç®¡ç†ã€åº”ç”¨è½¯ä»¶å…±äº«ã€æ‰“å°æœºå…±äº«ã€å·¥ä½œç»„å†…çš„æ—¥ç¨‹å®‰æ’ã€ç”µå­é‚®ä»¶å’Œä¼ çœŸé€šä¿¡æœåŠ¡ç­‰åŠŸèƒ½ã€‚å±€åŸŸç½‘æ˜¯å°é—­å‹çš„ï¼Œå¯ä»¥ç”±åŠå…¬å®¤å†…çš„ä¸¤å°è®¡ç®—æœºç»„æˆï¼Œä¹Ÿå¯ä»¥ç”±ä¸€ä¸ªå…¬å¸å†…çš„ä¸Šåƒå°è®¡ç®—æœºç»„æˆã€‚

  **å±€åŸŸç½‘ä¸€èˆ¬ä¸ºä¸€ä¸ªéƒ¨é—¨æˆ–å•ä½æ‰€æœ‰ï¼Œå»ºç½‘ã€ç»´æŠ¤ä»¥åŠæ‰©å±•ç­‰è¾ƒå®¹æ˜“ï¼Œç³»ç»Ÿçµæ´»æ€§é«˜ã€‚å…¶ä¸»è¦ç‰¹ç‚¹æ˜¯ï¼š**

  1. è¦†ç›–çš„åœ°ç†èŒƒå›´è¾ƒå°ï¼Œåªåœ¨ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å±€éƒ¨èŒƒå›´å†…è”ï¼Œå¦‚ä¸€åº§æˆ–é›†ä¸­çš„å»ºç­‘ç¾¤å†…ã€‚
  2. ä½¿ç”¨ä¸“é—¨é“ºè®¾çš„ä¼ è¾“ä»‹è´¨è¿›è¡Œè”ç½‘ï¼Œæ•°æ®ä¼ è¾“é€Ÿç‡é«˜ï¼ˆ10Mb/sï½10Gb/sï¼‰ã€‚
  3. é€šä¿¡å»¶è¿Ÿæ—¶é—´çŸ­ï¼Œå¯é æ€§è¾ƒé«˜ã€‚

  å±€åŸŸç½‘çš„ç±»å‹å¾ˆå¤šï¼Œè‹¥æŒ‰ç½‘ç»œä½¿ç”¨çš„ä¼ è¾“ä»‹è´¨åˆ†ç±»ï¼Œå¯åˆ†ä¸ºæœ‰çº¿ç½‘å’Œæ— çº¿ç½‘ï¼›è‹¥æŒ‰[ç½‘ç»œæ‹“æ‰‘ç»“æ„](https://www.zhihu.com/search?q=ç½‘ç»œæ‹“æ‰‘ç»“æ„&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A2565012876})åˆ†ç±»ï¼Œå¯åˆ†ä¸ºæ€»çº¿å‹ã€æ˜Ÿå‹ã€ç¯å‹ã€æ ‘å‹ã€æ··åˆå‹ç­‰ï¼›è‹¥æŒ‰ä¼ è¾“ä»‹è´¨æ‰€ä½¿ç”¨çš„è®¿é—®æ§åˆ¶æ–¹æ³•åˆ†ç±»ï¼Œåˆå¯åˆ†ä¸º**ä»¥å¤ªç½‘(Ethernet)ã€[ä»¤ç‰Œç¯ç½‘](https://www.zhihu.com/search?q=ä»¤ç‰Œç¯ç½‘&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"answer"%2C"sourceId"%3A2565012876})ã€FDDIç½‘å’Œæ— çº¿å±€åŸŸç½‘**ç­‰ã€‚

- ä¸ªäººå±€åŸŸç½‘PAN:bluetooth,zigbee

### æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±» topology structure 

### æŒ‰ä¼ è¾“æŠ€æœ¯åˆ†ç±»ï¼šBy transmission technology

- broadcasting/multi-casting
- Point to point (Wide Area Network )

### æŒ‰äº¤æ¢æŠ€æœ¯åˆ†ç±» Network layer : **Network Core: Switching**

Core: **interconnected routers**

**Circuit Switching:çº¿è·¯äº¤æ¢**

åœ¨è¿›è¡Œæ•°æ®ä¼ è¾“å‰ï¼Œä¸¤ä¸ªç»“ç‚¹ä¹‹é—´å¿…é¡»å…ˆå»ºç«‹ä¸€æ¡ä¸“ç”¨ï¼ˆåŒæ–¹ç‹¬å ï¼‰çš„ç‰©ç†é€šä¿¡è·¯å¾„ï¼ˆç”±é€šä¿¡åŒæ–¹ä¹‹é—´çš„äº¤æ¢è®¾å¤‡å’Œé“¾è·¯é€æ®µè¿æ¥è€Œæˆï¼‰ï¼Œè¯¥è·¯å¾„å¯èƒ½ç»è¿‡è®¸å¤šä¸­é—´ç»“ç‚¹ã€‚è¿™ä¸€è·¯å¾„åœ¨æ•´ä¸ªæ•°æ®ä¼ è¾“æœŸé—´ä¸€ç›´è¢«ç‹¬å ï¼Œç›´åˆ°é€šä¿¡ç»“æŸåæ‰è¢«é‡Šæ”¾ã€‚

**construct a dedicated path between the two end devices**

å› æ­¤ï¼ŒCircuit Switching åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè¿æ¥å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè¿æ¥é‡Šæ”¾ã€‚

- circuit establishment
- information transfer(analog and digital)
- circuit terminates

advantage:

*Once established,*

- *Network is transparent to users.*
- *Data* *rate is fixed**/guaranteed.*
- *Data arrives* *in order**.*

### disadvantage:

- *Circuit establishment delay*
- *Low utilization*
- *Resource is divided into channels,* *and a channel is occupied* *throughout the connection*

**Packet Switching:åŒ…äº¤æ¢**

é™åˆ¶äº†æ¯æ¬¡ä¼ é€çš„æ•°æ®å—å¤§å°çš„ä¸Šé™ï¼ŒæŠŠå¤§çš„æ•°æ®å—åˆ’åˆ†ä¸ºåˆç†çš„å°æ•°æ®å—ï¼Œå†åŠ ä¸Šä¸€äº›å¿…è¦çš„æ§åˆ¶ä¿¡æ¯ï¼ˆå¦‚æºåœ°å€ã€ç›®çš„åœ°å€å’Œç¼–å·ä¿¡æ¯ç­‰ï¼‰ï¼Œæ„æˆåˆ†ç»„ï¼ˆPacketï¼‰ç½‘ç»œç»“ç‚¹æ ¹æ®æ§åˆ¶ä¿¡æ¯æŠŠåˆ†ç»„é€åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œä¸‹ä¸€ä¸ªç»“ç‚¹æ¥æ”¶åˆ°åˆ†ç»„åï¼Œæš‚æ—¶ä¿å­˜å¹¶æ’é˜Ÿç­‰å¾…ä¼ è¾“ï¼Œç„¶åæ ¹æ®åˆ†ç»„æ§åˆ¶ä¿¡æ¯é€‰æ‹©å®ƒçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œç›´åˆ°åˆ°è¾¾ç›®çš„ç»“ç‚¹ã€‚

### steps:

- Data is divided into packets.
- **store-and-forward**

*A* *packet* *must be received as a whole* *(every bit) before it can be transmitted.*

### advantages:

- *Each packet uses the full link* *bandwidth.*
- *Resource is shared among users.*
- *Resource can be used* ***on demand**.*
- *Can admit* *more users**!!*

### disadvantages:

- *Resource contention* èµ„æºå†²çª
- *Congestion*å µå¡ æ‹¥æŒ¤
- *Routing is complex*
- *Packets may arrive out of order.*

### Bursty Data:

*Packet Switching can handle* *bursty data:*

- *Resource is shared*.
- *Resource is used on demand.*
- *Each packet uses the full bandwidth.*

### Simple Router Model

è¦ä¼ é€çš„æ•°æ®é‡å¾ˆå¤§ä¸”å…¶ä¼ é€æ—¶é—´è¿œå¤§äºå‘¼å«æ—¶é—´æ—¶ï¼Œé‡‡ç”¨ç”µè·¯äº¤æ¢è¾ƒä¸ºåˆé€‚ã€‚ç«¯åˆ°ç«¯çš„é€šè·¯ç”±å¤šæ®µé“¾è·¯ç»„æˆæ—¶ï¼Œé‡‡ç”¨åˆ†ç»„äº¤æ¢ä¼ é€æ•°æ®è¾ƒä¸ºåˆé€‚

When the amount of data to be transmitted is large and the transmission time is much longer than the call time, circuit switching is more suitable. When the end-to-end path consists of multiple links, packet switching is more suitable for data transmission.

![image-20240108220031063](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108220031063.png)

# Performance metric:

## bandwidth

the highest data rate is called bandwidth

## Data rate

## Delay:an important performance metric

æŒ‡æ•°æ®ï¼ˆä¸€ä¸ªæŠ¥æ–‡æˆ–åˆ†ç»„ï¼‰ä»ç½‘ç»œï¼ˆæˆ–é“¾è·¯ï¼‰çš„ä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€è¦çš„æ€»æ—¶é—´ï¼Œå®ƒç”±4éƒ¨åˆ†æ„æˆï¼šå‘é€æ—¶å»¶ã€ä¼ æ’­æ—¶å»¶ã€å¤„ç†æ—¶å»¶å’Œæ’é˜Ÿæ—¶å»¶ã€‚

- **Transmission delay**

**ç»“ç‚¹å°†åˆ†ç»„çš„æ‰€æœ‰æ¯”ç‰¹æ¨å‘ï¼ˆä¼ è¾“ï¼‰é“¾è·¯æ‰€éœ€çš„æ—¶é—´**ï¼Œå³ä»å‘é€åˆ†ç»„çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ç®—èµ·ï¼Œåˆ°è¯¥åˆ†ç»„çš„æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€éœ€çš„æ—¶é—´ï¼Œå› æ­¤ä¹Ÿç§°ä¼ è¾“æ—¶å»¶ã€‚

link speed å°±æ˜¯transmission rate

è®¡ç®—å…¬å¼ä¸ºå‘é€æ—¶å»¶=åˆ†ç»„é•¿åº¦/ä¿¡é“å®½åº¦

$$ d_{trans}=\frac{packet \ length}{  data\ rate} =\frac{L}{R} $$

- **propagation delay**

ç”µç£æ³¢åœ¨ä¿¡é“ä¸­ä¼ æ’­ä¸€å®šçš„è·ç¦»éœ€è¦èŠ±è´¹çš„æ—¶é—´ï¼Œå³ä¸€ä¸ªæ¯”ç‰¹ä»é“¾è·¯çš„ä¸€ç«¯ä¼ æ’­åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ã€‚è®¡ç®—å…¬å¼ä¸º

ä¼ æ’­æ—¶å»¶=ä¿¡é“é•¿åº¦/ç”µç£æ³¢åœ¨ä¿¡é“ä¸Šçš„ä¼ æ’­é€Ÿç‡

- **Processing delay**

æ•°æ®åœ¨äº¤æ¢ç»“ç‚¹ä¸ºå­˜å‚¨è½¬å‘è€Œè¿›è¡Œçš„ä¸€äº›å¿…è¦çš„å¤„ç†æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œåˆ†æåˆ†ç»„çš„é¦–éƒ¨ã€ä»åˆ†ç»„ä¸­æå–æ•°æ®éƒ¨åˆ†ã€è¿›è¡Œå·®é”™æ£€éªŒæˆ–æŸ¥æ‰¾é€‚å½“çš„è·¯ç”±ç­‰ã€‚

é€šå¸¸å°äºæ¯«ç§’çº§åˆ«ã€‚

- **Queuing delay**

åˆ†ç»„åœ¨è¿›å…¥è·¯ç”±å™¨åè¦å…ˆåœ¨è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…å¤„ç†ã€‚è·¯ç”±å™¨ç¡®å®šè½¬å‘ç«¯å£åï¼Œè¿˜è¦åœ¨è¾“å‡ºé˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…è½¬å‘ï¼Œè¿™å°±äº§ç”Ÿäº†æ’é˜Ÿæ—¶å»¶ã€‚

value depends on congestion level.

å› æ­¤ï¼Œæ•°æ®åœ¨ç½‘ç»œä¸­ç»å†çš„æ€»æ—¶å»¶å°±æ˜¯ä»¥ä¸Š4éƒ¨åˆ†æ—¶å»¶ä¹‹å’Œï¼š

æ€»æ—¶å»¶=transmission delay+propagation delay+ processing delay+queuing delay

æ³¨æ„ï¼šåšé¢˜æ—¶ï¼Œ**æ’é˜Ÿæ—¶å»¶å’Œå¤„ç†æ—¶å»¶**ä¸€èˆ¬å¯å¿½ç•¥ä¸è®¡ï¼ˆé™¤éé¢˜ç›®å¦æœ‰è¯´æ˜ï¼‰ã€‚å¦å¤–ï¼Œå¯¹äº**é«˜é€Ÿé“¾è·¯ï¼Œæé«˜çš„ä»…æ˜¯æ•°æ®å‘é€é€Ÿç‡transmission** è€Œéæ¯”ç‰¹åœ¨é“¾è·¯ä¸Šçš„ä¼ æ’­é€Ÿç‡ã€‚æé«˜æ•°æ®çš„å‘é€é€Ÿç‡åªæ˜¯ä¸ºäº†å‡å°‘æ•°æ®çš„å‘é€æ—¶å»¶ã€‚

è®¡ç®—é¢˜è¦æ³¨æ„b å’ŒB

## Throughput

å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œçš„æ•°æ®é‡

# *Network Software: Protocol Hierarchies*

## Hierachy â€”â€”a layer structure

SDU

PCU

PDU

Reason and target: explicit structure /modularization/

****\*Each layer does encapsulation/decapsulation\*****

## Protocol, Service, and Interface

protocol:a set of rules governing how communicating parties interact.

æ§åˆ¶ä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰å¯¹ç­‰å®ä½“è¿›è¡Œé€šä¿¡çš„è§„åˆ™çš„é›†åˆï¼Œæ˜¯æ°´å¹³çš„ã€‚ä¸å¯¹ç­‰å®ä½“ä¹‹é—´æ˜¯æ²¡æœ‰åè®®çš„ï¼Œæ¯”å¦‚ç”¨TCP/IPåè®®æ ˆé€šä¿¡çš„ä¸¤ä¸ªç»“ç‚¹ï¼Œç»“ç‚¹Açš„ä¼ è¾“å±‚å’Œç»“ç‚¹Bçš„ä¼ è¾“å±‚ä¹‹é—´å­˜åœ¨åè®®ï¼Œä½†ç»“ç‚¹Açš„ä¼ è¾“å±‚å’Œç»“ç‚¹Bçš„ç½‘ç»œå±‚ä¹‹é—´ä¸å­˜åœ¨åè®®ã€‚ç½‘ç»œåè®®ä¹Ÿç®€ç§°ä¸ºåè®®ã€‚

The protocol consists of three parts: **grammar, semantic and synchronization**. The syntax defines the format of the data transmission; the semantics defines the functions to be completed, what control information to be sent, what action to complete and what response to make; the synchronization of the conditions of various operations, timing relations, etc., a detailed description of the sequence of events. A complete protocol should usually have line management (establish, release connection), error control, data conversion, etc.

Interface: a set of allowed operations between layers/ how to access it.

Service: a set of operations that a layer provides to the layer above it.

### Service Classification

connection-oriented   connectionless

Reliable Service  unreliable Service

Acknowledged Service  Unacknowledged Serviceâ€

## The (ISO) OSI  **Open Systems Interconnection** Reference Model

OSI **Open Systems Interconnection** æ˜¯â€œå¼€æ”¾ç³»ç»Ÿäº’è¿â€çš„ç¼©å†™ï¼Œè¯¥æ¨¡å‹æ˜¯ç”±å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISO International Standards Organizationï¼‰å¼€å‘çš„

**communication subnet** é€šä¿¡å­ç½‘åŒ…æ‹¬ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚å’Œç½‘ç»œå±‚ï¼Œä¸»è¦è´Ÿè´£æ•°æ®é€šä¿¡data communicationã€‚

**resource subnet** èµ„æºå­ç½‘æ˜¯OSIå‚è€ƒæ¨¡å‹çš„ä¸Šä¸‰å±‚ï¼Œä¼ è¾“å±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯å‘é«˜å±‚ç”¨æˆ·å±è”½ä¸‹é¢é€šä¿¡å­ç½‘çš„ç»†èŠ‚ï¼ˆå¦‚ç½‘ç»œæ‹“æ‰‘ã€è·¯ç”±åè®®ç­‰ï¼‰block the details of the communication subnet

**physical**

è´Ÿè´£å®šä¹‰ä¸ä¼ è¾“åª’ä»‹ï¼ˆä¾‹å¦‚é“œçº¿ã€å…‰çº¤ï¼‰çš„æ¥å£ã€‚è¿™ä¸€å±‚å…³å¿ƒçš„æ˜¯ç”µå‹ã€æ—¶é’Ÿé¢‘ç‡ã€ç‰©ç†è¿æ¥ç­‰ã€‚

ä¹Ÿæœ‰å¾ˆå¤šåè®®

**data link**

function: frame    error control   flow control (not *congestion*  control, Neighboring Nodes)  transmission management

**network:datagram**

function:      error control   flow control (whole network) *congestion*  control    router selection

*routing from source to destination*

- *subnet, addressing, routing, congestion control(æ‹¥å¡æ§åˆ¶)*
- æä¾›connection-oriented connectionless
- protocols: IP(connectionless) IPX ICMP ç­‰ã€‚IPæ˜¯æ— è¿æ¥çš„ç½‘é™…åè®®

**transport  layer**

*process-to-processï¼ˆè¿›ç¨‹åˆ°è¿›ç¨‹ï¼‰ **reliable data transfer***

- *error control, flow control(p2p), congestion control*

**session layer**

ä¼šè¯å±‚å…è®¸ä¸åŒä¸»æœºä¸Šçš„å„ä¸ªè¿›ç¨‹ä¹‹é—´è¿›è¡Œä¼šè¯ã€‚ä¼šè¯å±‚åˆ©ç”¨ä¼ è¾“å±‚æä¾›çš„ç«¯åˆ°ç«¯çš„æœåŠ¡ï¼Œ å‘è¡¨ç¤ºå±‚æä¾›å®ƒçš„å¢å€¼æœåŠ¡ã€‚è¿™ç§æœåŠ¡ä¸»è¦ä¸ºè¡¨ç¤ºå±‚å®ä½“æˆ–ç”¨æˆ·è¿›ç¨‹å»ºç«‹è¿æ¥å¹¶åœ¨è¿æ¥ä¸Šæœ‰åºåœ°ä¼ è¾“æ•°æ®ï¼Œè¿™å°±æ˜¯ä¼šè¯ï¼Œä¹Ÿç§°å»ºç«‹åŒæ­¥(SYN)ã€‚ ä¼šè¯å±‚è´Ÿè´£ç®¡ç†ä¸»æœºé—´çš„ä¼šè¯è¿›ç¨‹ï¼ŒåŒ…æ‹¬å»ºç«‹ã€ç®¡ç†åŠç»ˆæ­¢è¿›ç¨‹é—´çš„ä¼šè¯ã€‚ä¼šè¯å±‚å¯ä»¥ä½¿ç”¨æ ¡éªŒç‚¹ä½¿é€šä¿¡ä¼šè¯åœ¨é€šä¿¡å¤±æ•ˆæ—¶ä»æ ¡éªŒç‚¹ç»§ç»­æ¢å¤é€šä¿¡ï¼Œå®ç°æ•°æ®åŒæ­¥

**presentation layer**

åœ¨ä¸¤ä¸ªé€šä¿¡ç³»ç»Ÿä¸­äº¤æ¢ä¿¡æ¯çš„è¡¨ç¤ºæ–¹å¼ã€‚ä¸åŒæœºå™¨é‡‡ç”¨çš„ç¼–ç å’Œè¡¨ç¤ºæ–¹æ³•ä¸ åŒï¼Œä½¿ç”¨çš„æ•°æ®ç»“æ„ä¹Ÿä¸åŒã€‚ä¸ºäº†ä½¿ä¸åŒè¡¨ç¤ºæ–¹æ³•çš„æ•°æ®å’Œä¿¡æ¯ä¹‹é—´èƒ½äº’ç›¸äº¤æ¢ï¼Œè¡¨ç¤ºå±‚é‡‡ç”¨æŠ½ è±¡çš„æ ‡å‡†æ–¹æ³•å®šä¹‰æ•°æ®ç»“æ„ï¼Œå¹¶é‡‡ç”¨æ ‡å‡†çš„ç¼–ç å½¢å¼ã€‚æ•°æ®å‹ç¼©ã€åŠ å¯†å’Œè§£å¯†ä¹Ÿæ˜¯è¡¨ç¤ºå±‚å¯æä¾› çš„æ•°æ®è¡¨ç¤ºå˜æ¢åŠŸèƒ½

**application layer**

## The TCP/IP Reference Model(Real world)

network interface

internet layer

transport layer

application layer

- everything over/above ip
- not a general model
- å¯¹èœ‚çªç½‘ç»œçš„æ”¯æŒéå¸¸å·®
- does not distinguish protocol/service /interface ä¸åŒºåˆ†
- *TCP/IP does not require strict layering*

##  

| OSI                                            | TCP/IP                                       |
| ---------------------------------------------- | -------------------------------------------- |
| Standards before protocols                     | A description of existing protocols          |
| Protocol, Service, Interface                   | No clear distinction                         |
| Functionality not specific to layers           |                                              |
|                                                |                                              |
| Specific functionality to layers               |                                              |
| A unified architecture (which did not  happen) | Difficult to describe other protocol stacks. |
| Connectionless/connection oriented             |                                              |
| network layer                                  | Connectionless network layer                 |
| Connection oriented transport layer r          | Connectionless/connection oriented           |
| transport layer                                |                                              |

## a hybrid reference model in this course

physical

link

network

transport

application

### cross-layer design?

# Device

## **ä¸­ç»§å™¨ (Repeater)â€”â€”physical layer**

**è‹±è¯­**ï¼šRepeater

**ä½œç”¨**ï¼šä¸­ç»§å™¨æ˜¯ä¸€ç§ç”¨äºå»¶é•¿ç½‘ç»œä¼ è¾“è·ç¦»çš„è®¾å¤‡ï¼Œå®ƒå·¥ä½œåœ¨OSIæ¨¡å‹çš„ç‰©ç†å±‚ã€‚å®ƒæ¥æ”¶æ¥è‡ªç½‘ç»œçš„ä¿¡å·ï¼Œæ¸…ç†å¹¶æ¢å¤åŸæ¥çš„ä¿¡å·å½¢æ€ï¼Œç„¶åå°†å…¶æ”¾å¤§æˆ–é‡æ–°ç”Ÿæˆï¼Œæœ€åå‘é€å‡ºå»ã€‚ä¸­ç»§å™¨ä¸»è¦ç”¨äºå…‹æœç”±äºé•¿è·ç¦»ä¼ è¾“è€Œå¯¼è‡´çš„ä¿¡å·è¡°å‡é—®é¢˜ï¼Œç¡®ä¿æ•°æ®èƒ½å¤Ÿåœ¨æ›´é•¿çš„è·ç¦»å†…ä¼ è¾“è€Œä¸ä¼šä¸¢å¤±æˆ–å˜å¾—ä¸å¯é ã€‚

## **é›†çº¿å™¨ (Hub)æ˜¯å¤šç«¯å£çš„Repeaterâ€”â€”physical layer**

**è‹±è¯­**ï¼šHub

**ä½œç”¨**ï¼šé›†çº¿å™¨æ˜¯ä¸€ç§åŸºæœ¬çš„ç½‘ç»œè®¾å¤‡ï¼Œç”¨äºå°†å¤šä¸ªç½‘ç»œè®¾å¤‡è¿æ¥åœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå•ä¸€çš„ç½‘ç»œã€‚å½“æ•°æ®åˆ°è¾¾ä¸€ä¸ªç«¯å£æ—¶ï¼Œå®ƒä¼šå¤åˆ¶è¯¥æ•°æ®å¹¶å°†å…¶å‘é€åˆ°å…¶ä»–æ‰€æœ‰ç«¯å£ï¼Œè®©æ‰€æœ‰è¿æ¥çš„è®¾å¤‡éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ•°æ®ã€‚é›†çº¿å™¨å·¥ä½œåœ¨OSIæ¨¡å‹çš„ç‰©ç†å±‚ï¼Œä»…ä»…è¿›è¡Œä¿¡å·çš„å†ç”Ÿæˆå’Œæ”¾å¤§ã€‚ç”±äºå®ƒå‘æ‰€æœ‰è®¾å¤‡å¹¿æ’­æ•°æ®ï¼Œå› æ­¤å®ƒä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œä¸”æ‰€æœ‰è®¾å¤‡å…±äº«å¸¦å®½ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚

## 

## switch äº¤æ¢æœº**â€”â€”data link layer**

Switchï¼ˆäº¤æ¢æœºï¼‰åœ¨ç½‘ç»œä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å®ƒæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ç½‘ç»œè®¾å¤‡ï¼Œå·¥ä½œåœ¨OSIæ¨¡å‹çš„æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼Œä¸»è¦ç”¨äºè¿æ¥å¤šä¸ªè®¾å¤‡ï¼Œå¦‚è®¡ç®—æœºã€æ‰“å°æœºå’ŒæœåŠ¡å™¨ï¼Œåœ¨ä¸€ä¸ªå±€åŸŸç½‘ï¼ˆLANï¼‰å†…éƒ¨è¿›è¡Œæ•°æ®åŒ…çš„è½¬å‘ã€‚ä»¥ä¸‹æ˜¯äº¤æ¢æœºçš„ä¸»è¦åŠŸèƒ½å’Œç‰¹ç‚¹ï¼š

1. **å¸§è½¬å‘**ï¼šäº¤æ¢æœºæ¥æ”¶åˆ°æ•°æ®å¸§åï¼Œä¼šæ ¹æ®å¸§å†…çš„MACåœ°å€ä¿¡æ¯å†³å®šå¦‚ä½•è½¬å‘ã€‚å®ƒèƒ½å¤Ÿè®°ä½æ¯ä¸ªè®¾å¤‡çš„MACåœ°å€åŠå…¶å¯¹åº”çš„ç«¯å£å·ï¼Œå› æ­¤åªå°†æ•°æ®å‘é€åˆ°ç›®çš„åœ°è®¾å¤‡æ‰€åœ¨çš„ç«¯å£ï¼Œè€Œä¸æ˜¯åƒé›†çº¿å™¨é‚£æ ·å¹¿æ’­ç»™æ‰€æœ‰ç«¯å£ã€‚è¿™æ˜¾è‘—æé«˜äº†ç½‘ç»œçš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚
2. **å†²çªåŸŸéš”ç¦»**ï¼šåœ¨ä»¥å¤ªç½‘ä¸­ï¼Œäº¤æ¢æœºå°†æ¯ä¸ªç«¯å£è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å†²çªåŸŸï¼Œè¿™æ„å‘³ç€æ•°æ®åŒ…ä¹‹é—´ä¸ä¼šç›¸äº’å†²çªï¼Œä»è€Œå…è®¸ç½‘ç»œå®ç°å…¨åŒå·¥é€šä¿¡ï¼Œæé«˜äº†ç½‘ç»œçš„å¸¦å®½å’Œæ•ˆç‡ã€‚
3. **è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰**ï¼šé«˜çº§äº¤æ¢æœºæ”¯æŒè™šæ‹Ÿå±€åŸŸç½‘ï¼Œå®ƒå…è®¸ç®¡ç†å‘˜åœ¨é€»è¾‘ä¸Šåˆ’åˆ†ç½‘ç»œï¼Œæ— è®ºç‰©ç†ä½ç½®å¦‚ä½•ï¼Œä»è€Œæé«˜äº†å®‰å…¨æ€§ï¼Œå‡å°‘äº†å¹¿æ’­æµé‡ï¼Œå¹¶å…è®¸æ›´çµæ´»çš„ç½‘ç»œç®¡ç†ã€‚

## reference model

### The (ISO) OSI  Open Systems Interconnection Reference Model

**network:datagram**

function:      error control   flow control (whole network) *congestion*  control    router selection

*routing from source to destination*

- *subnet, addressing, routing, congestion control(æ‹¥å¡æ§åˆ¶)*
- æä¾›connection-oriente/ connectionless   service
- protocols: IP(connectionless) IPX ICMP ç­‰ã€‚IPæ˜¯æ— è¿æ¥çš„ç½‘é™…åè®®

### The TCP/IP Reference Model(Real world)



### comparison

| OSI                                                | TCP/IP                                              |
| -------------------------------------------------- | --------------------------------------------------- |
| Standards before protocols                         | A description of existing protocols                 |
| ***Protocol, Service, Interface***                 | No clear distinction                                |
| ***Functionality not specific to layers*** **  **  | **  *****Specific functionality to layers***        |
| A unified architecture (which did not  happen)     | ***Difficult to describe other protocol stacks.***  |
| Connectionless/connection oriented   network layer | ***Connectionless network layer***                  |
| Connection oriented transport layer r              | Connectionless/connection oriented  transport layer |



# Physical Layer

## 2.1 THE THEORETICAL BASIS FOR DATA COMMUNICATION

 Symbol ä¼ è¾“é€Ÿç‡   å•ä½æ˜¯æ³¢ç‰¹ï¼ˆBaudï¼‰

datarate  æ¯”ç‰¹/ç§’ï¼ˆb/s)  æ¯”ç‰¹ç‡ 

*max datarate* ğ‘…ğ‘šğ‘ğ‘¥=2 ğµğ‘Š ğ‘™ğ‘œğ‘”2(ğ‘‰) *bps è¿™é‡Œçš„å¸¦å®½æ˜¯æŒ‡æœ€é«˜é¢‘ç‡äº†*

ä¸¤å€çš„é‡‡æ ·é€Ÿåº¦*ç å…ƒä¸ªæ•°

*max datarate C*= BW log2ï¼ˆl + S/Nï¼‰ ï¼ˆå•ä½ä¸ºb/sï¼‰ è¿™é‡Œè®¡ç®—çš„æ˜¯å•çº¯çš„æ¯”å€¼ï¼ï¼

![image-20240108224505500](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108224505500.png)

## **2.2 GUIDED TRANSMISSION MEDIA:***signal propagates along a direction,*

*****Media\*: \*where analog signal (that carries information) propagates\***

**Magnetic Media**

éšæœºçš„ç”µç£æ³¢è¾å°„ï¼Œä¹Ÿå°±æ˜¯å™ªéŸ³ï¼Œèåˆè¿›ç¯å¢ƒ



**Twisted Pairs**

åŒç»çº¿æ˜¯æœ€å¸¸ç”¨çš„å¤è€ä¼ è¾“ä»‹è´¨ï¼Œ

å®ƒç”±ä¸¤æ ¹é‡‡ç”¨ä¸€å®šè§„åˆ™å¹¶æ’ç»åˆçš„ã€ç›¸äº’ç»ç¼˜çš„é“œå¯¼çº¿ç»„æˆã€‚ç»åˆå¯ä»¥å‡å°‘å¯¹ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜æŠ—ç”µç£å¹²æ‰°çš„èƒ½åŠ›ï¼Œå¯åœ¨åŒç»çº¿çš„å¤–é¢å†åŠ ä¸Šä¸€å±‚ï¼Œå³ç”¨é‡‘å±ä¸ç¼–ç»‡æˆçš„å±è”½å±‚ï¼Œè¿™å°±æ˜¯å±è”½åŒç»çº¿(STP)Oæ— å±è”½å±‚çš„åŒç»çº¿ç§°ä¸ºéå±è”½åŒç»çº¿(UTP)

æ˜¯æœ€å¸¸ç”¨çš„ä¼ è¾“ä»‹è´¨ä¹‹ä¸€ï¼Œåœ¨å±€åŸŸç½‘å’Œä¼ ç»Ÿç”µè¯ç½‘ä¸­æ™®éä½¿ç”¨

**Coaxial Cable**

è¢«å¹¿æ³›ç”¨äºä¼ è¾“è¾ƒé«˜é€Ÿç‡çš„æ•°æ®

*Cable broadband Internet*

*Aircraft, military, medical*

*TV, video equipment*

**Fiber Optic cable**  

å…‰çº¤ä¸ä»…å…·æœ‰é€šä¿¡å®¹é‡éå¸¸å¤§çš„ä¼˜ç‚¹ï¼Œè¿˜å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š 1ï¼‰ ä¼ è¾“æŸè€—å°ï¼Œä¸­ç»§è·ç¦»é•¿ï¼Œå¯¹è¿œè·ç¦»ä¼ è¾“ç‰¹åˆ«ç»æµã€‚ 2ï¼‰ æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚è¿™åœ¨æœ‰å¤§ç”µæµè„‰å†²å¹²æ‰°çš„ç¯å¢ƒä¸‹å°¤ä¸ºé‡è¦ã€‚ 3ï¼‰ æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¹Ÿä¸æ˜“è¢«çªƒå¬æˆ–æˆªå–æ•°æ®ã€‚ 4ï¼‰ ä½“ç§¯å°ï¼Œé‡é‡è½»ã€‚è¿™åœ¨ç°æœ‰ç”µç¼†ç®¡é“å·²æ‹¥å¡ä¸å ªçš„æƒ…å†µä¸‹ç‰¹åˆ«æœ‰åˆ©ã€‚

##### Communication satellites**

- **GEO** (**Geostationary Earth Orbit**) **satellites**. They are at high altitude, approximately 35,786 kilometers above Earth;orbit the Earth at the same rotational speed, so they appear stationary relative to the Earth's surface; Ideal for communication and broadcasting.
- **MEO**(**Medium-Earth Orbit**) satellites.  Located at medium altitudes. Used for global navigation systems like GPS .å—åŒ—æé€šä¿¡
- **LEO** (**Low-Earth Orbit**) **satellites**. Used for various purposes, including Earth observation, scientific research, and satellite internet.

*Modulationè°ƒåˆ¶  digitalâ†’ anolog*

full-duplex -> modulator & demodulator

### *Multiplexing*ï¼š

SDM TDM FDM CDM 

> ##### A: (-1 -1 -1 +1 +1 -1 +1 +1)
>
> B: (-1 -1 +1 -1 +1 +1 +1 -1)
>
> C: (-1 +1 -1 +1 +1 +1 -1 -1)
>
> D: (-1 +1 -1 -1 -1 -1 +1 -1)
>
> The received sequence S = (-1 +1 -3 +1 -1 -3 +1 +1).
>
> Which station transmitted, and what are the transmitted bits?
>
> 
>
> Answer:
> $$
> R_A=\frac{1}{8}<Sâ‹…A>=\frac{1}{8}(1-1+3+1-1+3+1+1)=1\\
> R_B=\frac{1}{8}<Sâ‹…B>=\frac{1}{8}(1-1-3-1-1-3+1-1)=-1\\
> R_C=\frac{1}{8}<Sâ‹…C>=\frac{1}{8}(1+1+3+1-1-3-1-1)=0\\
> R_D=\frac{1}{8}<Sâ‹…D>=\frac{1}{8}(1+1+3-1+1+3+1-1)=1\\
> $$
> A station transmit 1.
>
> B station transmit 0.
>
> D station transmit 1.

#####  

### Device

Repeaterâ€”â€”physical layer:å®ƒæ¥æ”¶æ¥è‡ªç½‘ç»œçš„ä¿¡å·ï¼Œæ¸…ç†å¹¶æ¢å¤åŸæ¥çš„ä¿¡å·å½¢æ€ï¼Œç„¶åå°†å…¶æ”¾å¤§æˆ–é‡æ–°ç”Ÿæˆï¼Œæœ€åå‘é€å‡ºå»

Hubâ€”â€”physical layer:å¤šç«¯å£çš„Repeater:å½“æ•°æ®åˆ°è¾¾ä¸€ä¸ªç«¯å£æ—¶ï¼Œå®ƒä¼šå¤åˆ¶è¯¥æ•°æ®å¹¶å°†å…¶å‘é€åˆ°å…¶ä»–æ‰€æœ‰ç«¯å£ï¼Œè®©æ‰€æœ‰è¿æ¥çš„è®¾å¤‡éƒ½èƒ½çœ‹åˆ°æ‰€æœ‰çš„æ•°æ®ã€‚é›†çº¿å™¨å·¥ä½œåœ¨OSIæ¨¡å‹çš„ç‰©ç†å±‚ï¼Œä»…ä»…è¿›è¡Œä¿¡å·çš„å†ç”Ÿæˆå’Œæ”¾å¤§ã€‚ç”±äºå®ƒå‘æ‰€æœ‰è®¾å¤‡å¹¿æ’­æ•°æ®ï¼Œå› æ­¤å®ƒä¸æ˜¯å¾ˆé«˜æ•ˆï¼Œä¸”æ‰€æœ‰è®¾å¤‡å…±äº«å¸¦å®½ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç½‘ç»œæ‹¥å¡ã€‚



# Datalink Layer

## 3.1 DATA LINK LAYER DESIGN ISSUES

*Framing*ï¼š*

 Character-based count*    

*Flag* *byte with* *byte stuffing*

*Flag byte with bit stuffing* 0111110

## 3.2 ERROR DETECTION AND CORRECTION

### 3.2.2 Error-Detecting Codes

*Parity Check*

***Hamming Distance***

*the number of bit positions in which two codewords differ*

Code Distance

ä»£ç è·ç¦»æ˜¯æŒ‡åœ¨ä¸€ç»„ç¼–ç ä¸­ï¼Œä»»æ„ä¸¤ä¸ªä»£ç ä¹‹é—´çš„æœ€å°æµ·æ˜è·ç¦»ã€‚

## 3.3 Basic Data link layer protocol

store and wait: å‘é€æ–¹æ¯å‘é€ä¸€å¸§ï¼Œéƒ½è¦ç­‰å¾…æ¥æ”¶æ–¹çš„åº”ç­”ä¿¡å·ï¼Œä¹‹åæ‰èƒ½å‘é€ä¸‹ä¸€å¸§ï¼›æ¥æ”¶æ–¹æ¯æ¥æ”¶ä¸€å¸§ï¼Œéƒ½è¦åé¦ˆä¸€ä¸ªåº”ç­”ä¿¡å·ï¼Œè¡¨ç¤ºå¯æ¥æ”¶ä¸‹ä¸€å¸§ã€‚

æ•ˆç‡Efficiencyï¼šä¿¡é“åˆ©ç”¨ç‡=ä¼ è¾“å¸§çš„æœ‰æ•ˆæ—¶é—´/ä¼ è¾“å¸§çš„å‘¨æœŸ

å‘é€æ–¹ä»å¼€å§‹å‘é€æ•°æ®åˆ°æ”¶åˆ°ç¬¬ä¸€ä¸ªç¡®è®¤å¸§ä¸ºæ­¢ï¼Œç§°ä¸ºä¸€ä¸ªå‘é€å‘¨æœŸã€‚

ä¿¡é“ååç‡=ä¿¡é“åˆ©ç”¨ç‡xå‘é€æ–¹çš„å‘é€é€Ÿç‡ã€‚

## 3.4 Sliding Window Protocols 

#  Multiple Access Control

æœ€å¸¸ç”¨çš„ä»¥å¤ªç½‘å’Œæ— çº¿å±€åŸŸç½‘ï¼Œéƒ½æ˜¯ä½¿ç”¨ MAC åœ°å€ä½œä¸ºåœ°å€æ ‡è¯†ç¬¦è¿›è¡Œé€šä¿¡çš„ã€‚

## 4.2 MULTIPLE ACCESS PROTOCOLS

Random Access MACï¼šcontention system
Pure ALOHA ä¸€ç›´éƒ½ä¸ç›‘å¬ï¼Œéšæœºå‘

*Slotted ALOHA*

### 4.2.2 *CSMA* Carrier Sense Multiple Access Protocols è½½æ³¢ç›‘å¬å¤šè·¯è®¿é—®

è½½æ³¢ä¾¦å¬åè®®ï¼ˆ carrier sense protocol ï¼‰CSMAåè®®æ˜¯åœ¨ALOHAåè®®åŸºç¡€ä¸Šæå‡ºçš„ä¸€ç§æ”¹è¿›åè®®ï¼Œå®ƒä¸ALOHAåè®®çš„ä¸»è¦åŒºåˆ«æ˜¯å¤šäº†ä¸€ä¸ªè½½æ³¢ç›‘å¬è£…ç½®ã€‚ï¼ˆæ²¡æœ‰æå‘é€åçš„ç›‘å¬ï¼‰

- ***1-Persistent CSMA**: if the node detects the channel idle, it transmits a frame. Otherwise, the*

*node waits (keeps listening) until the channel becomes idle (so it can send immediately).*

â€œ1-åšæŒâ€çš„å«ä¹‰æ˜¯ï¼šç›‘å¬åˆ°ä¿¡é“å¿™åï¼Œç»§ç»­åšæŒç›‘å¬ä¿¡é“ï¼›ç›‘å¬åˆ°ä¿¡é“ç©ºé—²åï¼Œå‘é€å¸§çš„ æ¦‚ç‡ä¸º1,å³ç«‹åˆ»å‘é€æ•°æ®ã€‚

- ***Non-persistent CSMA**: the node does not listen continuously, but checks the channel again*

*after a random period of time.*

ä¸€ä¸ªç»“ç‚¹è¦å‘é€æ•°æ®æ—¶ï¼Œé¦–å…ˆç›‘å¬ä¿¡é“ï¼›å¦‚æœä¿¡é“ç©ºé—²ï¼Œé‚£ä¹ˆç«‹å³å‘é€æ•°æ®ï¼›å¦‚æœä¿¡é“å¿™ï¼Œé‚£ä¹ˆæ”¾å¼ƒç›‘å¬ï¼Œç­‰å¾…ä¸€ä¸ªéšæœºçš„æ—¶é—´åå†é‡å¤ä¸Šè¿°è¿‡ç¨‹

- ***p-Persistent CSMA**: if the node detects the channel idle, it transmits a frame with probability*

*p (and defer/wait with probability 1-p).*

ä¸€ä¸ªç»“ç‚¹è¦å‘é€æ•°æ®æ—¶ï¼Œ é¦–å…ˆç›‘å¬ä¿¡é“ï¼›å¦‚æœä¿¡é“å¿™ï¼Œå°±æŒç»­ç›‘å¬ï¼Œç›´è‡³ä¿¡é“ç©ºé—²ï¼›å¦‚æœä¿¡é“ç©ºé—²ï¼Œé‚£ä¹ˆä»¥æ¦‚ç‡på‘é€æ•°æ®ï¼Œä»¥æ¦‚ç‡æ¨è¿Ÿåˆ°ä¸‹ä¸€ä¸ªæ—¶éš™ï¼›å¦‚æœåœ¨ä¸‹ä¸€ä¸ªæ—¶éš™ä¿¡é“ä»ç„¶ç©ºé—²ï¼Œé‚£ä¹ˆä»ä»¥æ¦‚ç‡på‘é€æ•°æ®ï¼Œä»¥æ¦‚ç‡1-pè¿Ÿåˆ°ä¸‹ä¸€ä¸ªæ—¶éš™ï¼›è¿™ä¸ªè¿‡ç¨‹ä¸€ç›´æŒç»­åˆ°æ•°æ®å‘é€æˆåŠŸæˆ–å› å…¶ä»–ç»“ç‚¹å‘é€æ•°æ®è€Œæ£€æµ‹åˆ°ä¿¡é“å¿™ä¸ºæ­¢ï¼Œè‹¥æ˜¯åè€…ï¼Œåˆ™ç­‰å¾…ä¸‹ä¸€ä¸ªæ—¶éš™å†é‡æ–°å¼€å§‹ç›‘å¬ã€‚

C*SMA/CD Operations* ç¢°æ’æ£€æµ‹ï¼ˆCollision Detectionï¼‰

â‘  å‡†å¤‡å‘é€ï¼šé€‚é…å™¨ä»ç½‘ç»œå±‚è·å¾—ä¸€ä¸ªåˆ†ç»„ï¼Œå°è£…æˆå¸§ï¼Œæ”¾å…¥é€‚é…å™¨çš„ç¼“å­˜ã€‚

â‘¡ æ£€æµ‹ä¿¡é“ï¼šè‹¥æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²ï¼Œå®ƒå°±å¼€å§‹å‘é€è¿™ä¸ªå¸§ã€‚è‹¥æ£€æµ‹åˆ°ä¿¡é“å¿™ï¼Œå®ƒå°±æŒç»­æ£€æµ‹ç›´è‡³ä¿¡é“ä¸Šæ²¡æœ‰ä¿¡å·èƒ½é‡ï¼Œç„¶åå¼€å§‹å‘é€è¿™ä¸ªå¸§ã€‚

â‘¢ åœ¨å‘é€è¿‡ç¨‹ä¸­ï¼Œé€‚é…å™¨ä»æŒç»­æ£€æµ‹ä¿¡é“ã€‚è¿™é‡Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼š

â€¢å‘é€æˆåŠŸï¼šåœ¨äº‰ç”¨æœŸå†…ä¸€ç›´æœªæ£€æµ‹åˆ°ç¢°æ’ï¼Œè¿™ä¸ªå¸§è‚¯å®šèƒ½å‘é€æˆåŠŸã€‚ â€¢å‘é€å¤±è´¥ï¼šåœ¨äº‰ç”¨æœŸå†…æ£€æµ‹åˆ°ç¢°æ’ï¼Œæ­¤æ—¶ç«‹å³åœæ­¢å‘é€ï¼Œé€‚é…å™¨æ‰§è¡ŒæŒ‡æ•°é€€é¿ç®—æ³•ï¼Œç­‰å¾… ä¸€æ®µéšæœºæ—¶é—´åè¿”å›åˆ°æ­¥éª¤â‘¡ã€‚è‹¥é‡ä¼ 16æ¬¡ä»ä¸èƒ½æˆåŠŸï¼Œåˆ™åœæ­¢é‡ä¼ å¹¶å‘ä¸ŠæŠ¥é”™ã€‚

### **4.2.3 Collision-Free Protocols**

> In this section, we will examine some protocols that resolve the contention for the channel without any collisions at all, not even during the contention period. Most of these protocols **are not currently used in major systems,** but in a rapidly changing field, having some protocols with excellent properties available for future systems is often a good thing.

***â€œTaking Turnsâ€ MAC protocols:***

polling, token passing  ç¯å½¢å±€åŸŸç½‘

****\*Bit-map  ï¼š Reservation-based\*****

contention slots

***Binary Countdown Protocols***

## 4.3 Ethernet



802.3

two types: classic Ethernet, switched Ethernet (now use)

### 4.3.2 classic Ethernet MAC sublayer protocol

frame format;![image-20240109013520073](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240109013520073.png)

**ä»¥å¤ªç½‘ç±»å‹/é•¿åº¦å­—æ®µ**ï¼ˆEtherType/Lengthï¼‰: 2ä¸ªå­—èŠ‚ï¼Œç”¨äºæ ‡è¯†ä¸Šä¸€å±‚åè®®ï¼ˆé€šå¸¸æ˜¯ç½‘ç»œå±‚ï¼‰çš„ç±»å‹ï¼Œä¾‹å¦‚IPv4æˆ–IPv6ï¼Œ



å‰å¯¼ç ï¼šä½¿æ¥æ”¶ç«¯ä¸å‘é€ç«¯æ—¶é’ŸåŒæ­¥ã€‚åœ¨å¸§å‰é¢æ’å…¥çš„8å­—èŠ‚å¯å†åˆ†ä¸ºä¸¤ä¸ªå­—æ®µï¼šç¬¬ä¸€ä¸ªå­—æ®µå…±7å­—èŠ‚ï¼Œæ˜¯å‰åŒæ­¥ç ï¼Œç”¨æ¥å¿«é€Ÿå®ç°MACå¸§çš„**æ¯”ç‰¹åŒæ­¥**ï¼›ç¬¬äºŒä¸ªå­—æ®µæ˜¯**å¸§å¼€å§‹å®šç•Œç¬¦ï¼Œè¡¨ç¤ºåé¢çš„ä¿¡æ¯å°±æ˜¯MACå¸§ã€‚7B+1B**



MAC addressing   6ä¸ªå­—èŠ‚ 

é«˜24ä½ä¸ºå‚å•†ä»£ç ï¼Œä½24ä½ä¸ºå‚å•†è‡ªè¡Œåˆ†é…çš„ç½‘å¡åºåˆ—å·

å¦‚æœä¼ è¾“å‡ºå»çš„ç›®æ ‡åœ°å€ç¬¬ä¸€ä½æ˜¯0 ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ™®é€šåœ°å€ï¼šå¦‚æœæ˜¯1 ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç»„åœ°å€ã€‚

ç”±å…¨1ç»„æˆçš„ç‰¹æ®Šåœ°å€ä¿ç•™ç”¨ä½œå¹¿æ’­ï¼ˆbroadcasting ï¼‰ã€‚å¦‚æœä¸€ä¸ªå¸§çš„ç›®æ ‡åœ°å€å®‡æ®µä¸ºå…¨ 1ï¼Œåˆ™å®ƒè¢«ç½‘ç»œä¸Šçš„æ‰€æœ‰ç«™æ¥æ”¶ã€‚

1. **ç¬¬ä¸€ä½çš„æ„ä¹‰**ï¼š
   - **å•æ’­åœ°å€**ï¼šå¦‚æœMACåœ°å€çš„ç¬¬ä¸€ä½æ˜¯0ï¼Œè¿™è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå•æ’­åœ°å€ï¼Œå³åœ°å€æ˜¯æŒ‡å‘ç½‘ç»œä¸Šçš„ä¸€ä¸ªç‰¹å®šè®¾å¤‡çš„ã€‚å•æ’­åœ°å€æ˜¯å”¯ä¸€åˆ†é…ç»™ç½‘ç»œä¸ŠæŸä¸€è®¾å¤‡çš„ï¼Œç¡®ä¿æ•°æ®åªå‘é€ç»™æŒ‡å®šçš„æ¥æ”¶æ–¹ã€‚
   - **ç»„æ’­åœ°å€**ï¼šå¦‚æœMACåœ°å€çš„ç¬¬ä¸€ä½æ˜¯1ï¼Œè¿™è¡¨æ˜è¿™æ˜¯ä¸€ä¸ªç»„æ’­åœ°å€ã€‚ç»„æ’­åœ°å€ç”¨æ¥åŒæ—¶å‘é€æ•°æ®ç»™ä¸€ç»„ç‰¹å®šçš„æ¥æ”¶è€…ã€‚æ‰€æœ‰å±äºè¿™ä¸ªç»„çš„è®¾å¤‡éƒ½ä¼šæ¥æ”¶åˆ°å‘é€ç»™è¯¥ç»„æ’­åœ°å€çš„æ•°æ®ã€‚
2. **ç‰¹æ®Šçš„å¹¿æ’­åœ°å€**ï¼š
   - **å¹¿æ’­åœ°å€**ï¼šç”±å…¨1ç»„æˆçš„MACåœ°å€ï¼ˆå³FF:FF:FF:FF:FF:FFï¼‰æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„åœ°å€ï¼Œå®ƒæ˜¯ä¸€ä¸ªé¢„ç•™çš„å¹¿æ’­åœ°å€ã€‚å½“ä¸€ä¸ªæ•°æ®å¸§çš„ç›®æ ‡åœ°å€å­—æ®µä¸ºå…¨1æ—¶ï¼Œå®ƒè¢«è®¾è®¡ä¸ºåœ¨å±€éƒ¨ç½‘ç»œä¸Šçš„æ‰€æœ‰ç«™éƒ½æ¥æ”¶ã€‚è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»„æ’­ï¼Œå…¶ä¸­ç»„åŒ…å«äº†ç½‘ç»œä¸Šçš„æ‰€æœ‰è®¾å¤‡ã€‚

The Minimum Frame Length (MAC): L/R â‰¥ propagation delay *2 

> ä»¥å¤ªç½‘è§„å®šå–51.2usä¸ºäº‰ç”¨æœŸçš„é•¿åº¦ã€‚å¯¹äº10Mb/sçš„ä»¥å¤ªç½‘ï¼Œåœ¨äº‰ç”¨æœŸå†…å¯å‘é€512bit, å³64Bã€‚åœ¨ä»¥å¤ªç½‘å‘é€æ•°æ®æ—¶ï¼Œå¦‚æœå‰64Bæœªå‘ç”Ÿå†²çªï¼Œé‚£ä¹ˆåç»­æ•°æ®ä¹Ÿå°±ä¸ä¼šå‘ç”Ÿå†²çªï¼ˆè¡¨ç¤ºå·²æˆåŠŸæŠ¢å ä¿¡é“ï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå‘ç”Ÿå†²çªï¼Œé‚£ä¹ˆå°±ä¸€å®šåœ¨å‰64Bç”±äºä¸€æ—¦æ£€æµ‹åˆ°å†²çªå°±ç«‹å³åœæ­¢å‘é€ï¼Œå› æ­¤è¿™æ—¶å‘é€å‡ºå»çš„æ•°æ®ä¸€å®šå°äº64Bã€‚å› æ­¤ï¼Œä»¥å¤ªç½‘è§„å®šæœ€çŸ­å¸§é•¿ä¸º64B,å‡¡é•¿åº¦å°äº64Bçš„å¸§éƒ½æ˜¯ç”±äºå†²çªè€Œå¼‚å¸¸ä¸­æ­¢çš„æ— æ•ˆå¸§ï¼Œæ”¶åˆ°è¿™ç§æ— æ•ˆå¸§æ—¶åº”ç«‹å³ä¸¢å¼ƒã€‚

*Ethernet MAC: CSMA/CD*   binary exponential backoff 

 

### 4.3.4 äº¤æ¢å¼ä»¥å¤ªç½‘

star topology

hub é›†çº¿å™¨

äº¤æ¢æœº switchâ€”â€”data link layer:äº¤æ¢æœºåªæŠŠå¸§è¾“å‡ºåˆ°è¯¥å¸§æƒ³å»çš„ç«¯å£ã€‚å½“äº¤æ¢æœºç«¯å£æ¥æ”¶åˆ°æ¥è‡ªæŸä¸ªç«™çš„ä»¥å¤ªç½‘å¸§ï¼Œå®ƒå°±æ£€æŸ¥è¯¥å¸§çš„ä»¥å¤ªç½‘åœ°å€ï¼Œç¡®å®šè¯¥å¸§å‰å¾€çš„ç›®çš„åœ°ç«¯å£ã€‚*Buffer frames: Store-and-Forward*ã€‚é€šå¸¸éƒ½æ˜¯full-duplexæ–¹å¼ï¼Œå°±ä¸éœ€è¦CDMA/CDã€‚å¦‚æœhalf-duplex, éœ€è¦ *use CSMA/CD to access segments*ã€‚*No configuration needed: plug-and-play, self-learning*ã€‚åšåˆ°äº†separate collision domain

## 4.4 Wireless LAN æ— çº¿å±€åŸŸç½‘

### 4.4.1 The 802.11 Architecture and Protocol Stack

The main wireless LAN standard is 802.11

Two modes: infrastructure mode; ad-Hoc mode;

![image-20240105224741106](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240105224741106.png)

 Key differences: è¡°å‡ å¹²æ‰° å¤šå¾„æ•ˆåº”

SNRä¿¡å™ªæ¯”å¾ˆé‡è¦

### 4.4.3 802.11 MAC å­å±‚åè®®

Why not CSMA/CD in wireless LAN?1ï¼‰æ¥æ”¶ä¿¡å·çš„å¼ºåº¦å¾€å¾€ä¼šè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦ï¼Œä¸”åœ¨æ— çº¿ä»‹è´¨ä¸Šä¿¡å·å¼ºåº¦çš„åŠ¨æ€å˜åŒ–èŒƒå›´å¾ˆå¤§ï¼Œå› æ­¤è‹¥è¦å®ç°ç¢°æ’æ£€æµ‹ï¼Œåˆ™ç¡¬ä»¶ä¸Šçš„èŠ±è´¹å°±ä¼šè¿‡å¤§ã€‚ hard to detect collision
2ï¼‰åœ¨æ— çº¿é€šä¿¡ä¸­ï¼Œå¹¶éæ‰€æœ‰çš„ç«™ç‚¹éƒ½èƒ½å¤Ÿå¬è§å¯¹æ–¹ï¼Œå³å­˜åœ¨â€œéšè”½ç«™â€é—®é¢˜ã€‚Hidden Terminal Problem

 

**Hidden Terminal Problem**

target: collision Avoid

*IEEE 802.11 MAC:* **CSMA/CA**:

802.11ä½¿ç”¨äº†ä¸‹åˆ—ä¸‰ç§IFSï¼šå¸§é—´é—´éš”ï¼ˆInterFrame Space, IFSï¼‰ã€‚

1ï¼‰ SIFS ï¼ˆçŸ­IFSï¼‰ï¼šæœ€çŸ­çš„IFS,ç”¨æ¥åˆ†éš”å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ï¼Œä½¿ç”¨SIFSçš„å¸§ç±»å‹æœ‰ACKå¸§ã€CTSå¸§ã€åˆ†ç‰‡åçš„æ•°æ®å¸§ï¼Œä»¥åŠæ‰€æœ‰å›ç­”APæ¢è¯¢çš„å¸§ç­‰ã€‚

2ï¼‰ PIFS ï¼ˆç‚¹åè°ƒIFSï¼‰ï¼šä¸­ç­‰é•¿åº¦çš„IFS,åœ¨PCFæ“ä½œä¸­ä½¿ç”¨ã€‚

3ï¼‰ DIFS ï¼ˆåˆ†å¸ƒå¼åè°ƒIFSï¼‰ï¼šæœ€é•¿çš„IFS,ç”¨äºå¼‚æ­¥å¸§ç«äº‰è®¿é—®çš„æ—¶å»¶ã€‚

backoff interval:é€€é¿æ—¶é—´ã€‚

**Sender:**

1. If sender senses the channel idle for *DIFS*, then transmit the entire frame.

   Otherwise,sender starts random backoff interval,by a timer.

2. Timer counts down when channel is idle,and freezes when channel is busy.

3. When Timer counts to zero,transmit the entire frame.

4. If an ACK is received by sender,go to step 1 to transmit the next frame;

   If an ACK is not received by sender,increase backoff interval(exponentially ) , go to step 2 , to transmit the same frame again.

**Receiver:**

â€‹	If the frame is successfully received, replies an ACK after *SIFS*.

RTSï¼ˆRequest To Sendï¼‰ï¼Œ CTT ï¼ˆClear To Sendï¼‰

æºç«™è¦å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå¹¿æ’­ä¸€ä¸ªå¾ˆçŸ­çš„è¯·æ±‚å‘é€RTS ï¼ˆRequest To Sendï¼‰æ§åˆ¶å¸§ï¼Œå®ƒåŒ…æ‹¬æºåœ°å€ã€ç›®çš„åœ°å€å’Œè¿™æ¬¡é€šä¿¡ï¼ˆå«ç›¸åº”çš„ç¡®è®¤å¸§ï¼‰æ‰€æŒç»­çš„æ—¶é—´ï¼Œè¯¥å¸§èƒ½è¢«å…¶èŒƒå›´å†…åŒ…æ‹¬APåœ¨å†…çš„æ‰€æœ‰ç«™ç‚¹å¬åˆ°ã€‚

è‹¥ä¿¡é“ç©ºé—²ï¼Œ åˆ™APå¹¿æ’­ä¸€ä¸ªå…è®¸å‘é€CTS ï¼ˆClear To Sendï¼‰æ§åˆ¶å¸§ï¼Œå®ƒåŒ…æ‹¬è¿™æ¬¡é€šä¿¡æ‰€éœ€çš„æŒç»­æ—¶é—´ï¼ˆä»RTSå¸§å¤åˆ¶ï¼‰ï¼Œè¯¥å¸§ä¹Ÿèƒ½è¢«å…¶èŒƒå›´å†…åŒ…æ‹¬Aå’ŒBåœ¨å†…çš„æ‰€æœ‰ç«™ç‚¹å¬åˆ°ã€‚Bå’Œå…¶ä»–ç«™å¬åˆ°CTSåï¼Œ åœ¨CTSå¸§ä¸­æŒ‡æ˜çš„æ—¶é—´å†…å°†æŠ‘åˆ¶å‘é€ï¼Œå¦‚å›¾3.24æ‰€ç¤ºã€‚CTSå¸§æœ‰ä¸¤ä¸ªç›®çš„ï¼šâ‘ ç»™æºç«™æ˜ç¡®çš„ å‘é€è®¸å¯ï¼›â‘¡æŒ‡ç¤ºå…¶ä»–ç«™ç‚¹åœ¨é¢„çº¦æœŸå†…ä¸è¦å‘é€ã€‚

## 4.8 DATA LINK LAYER SWITCHING æ•°æ®é“¾è·¯å±‚äº¤æ¢

### 4.8.1 Uses of Bridges

ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ç½‘æ¡¥çš„ç°ä»£åç§°

å®ƒä»¬æä¾›çš„åŠŸèƒ½è¶…è¶Šäº†ä¼ ç»Ÿçš„ä»¥å¤ªç½‘å’Œä»¥å¤ªç½‘é›†çº¿å™¨ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æŠŠå¤šä¸ªå±€åŸŸç½‘åŠ å…¥åˆ° ä¸€ä¸ªæ›´å¤§æ›´å¿«çš„ç½‘ç»œä¸Šã€‚æˆ‘ä»¬å°†äº¤æ›¿ç€ä½¿ç”¨æœ¯è¯­â€œç½‘æ¡¥â€å’Œâ€œäº¤æ¢æœºâ€

ç½‘æ¡¥å·¥ä½œåœ¨é“¾è·¯å±‚çš„MACå­å±‚ï¼Œå¯ä»¥ä½¿ä»¥å¤ªç½‘å„ç½‘æ®µæˆä¸ºéš”ç¦»å¼€çš„ç¢°æ’åŸŸï¼ˆåˆç§°å†²çªåŸŸï¼‰ã€‚å¦‚æœæŠŠç½‘æ¡¥æ¢æˆå·¥ä½œåœ¨ç‰©ç†å±‚çš„è½¬å‘å™¨ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰è¿™ç§è¿‡æ»¤é€šä¿¡é‡çš„åŠŸèƒ½ã€‚ç”±äºå„ç½‘æ®µç›¸å¯¹ç‹¬ç«‹ï¼Œå› æ­¤ä¸€ä¸ªç½‘æ®µçš„æ•…éšœä¸ä¼šå½±å“åˆ°å¦ä¸€ä¸ªç½‘æ®µçš„è¿è¡Œã€‚ä¸ä¼šå†²çª

### 4.8.2 self-learning bridge (in switch)

1. **Initial State**: When a bridge is first powered on, its forwarding table is empty.
2. **Bridge uses the backward learning algorithm**: By learning every frame sent on its ports,bridge can tell the source address of the frame can be accessible on the port the frame comes. And  bridge will add an entry to the forwarding table.
3. **Routing procedure**: 

   1. If the destination port is known( in the forwarding table), and the port for the destination address is the same as the **source** port,**discard** the frame.

   2. If the destination port is known( in the forwarding table), and the destination address and the source port are **different**, forward the frame on to the destination port.

   3. If the destination port is **unknown**, use **flooding** and send the frame on all ports **except the source port.** 
4. **Aging out old entries**: The forwarding table entries have a certain aging time. If an entry is not refreshed (by frames from the same source MAC address being seen again) within a certain time, the entry is removed from the table. This ensures that the table is kept up-to-date with only active hosts.
5. **Spanning Trees**: To avoid loops, bridg

switching table:*Entry:  MAC address of a host, interface* *to each host, and a time stamp*(time to live)

filter:  decide to forward or discard ; *local frames stay local*

forward: decide which port a frame to go

How does a bridge learn the hosts in a LAN?åˆå§‹çŠ¶æ€ï¼›backward learning algorithmï¼›Routing procedure(known-same, known-different, unknown);aging out; Spanning tree

Flood :  *Forward to all* *interfaces except the one* *there the frame has arrived.* 

switch breaks subnets into LAN segments: LAN-segments-> separate  collision domain

### 4.8.3 ç”Ÿæˆæ ‘ç½‘æ¡¥

 hub: broadcast storm  switch: no ï¼ˆbecause spinning treeï¼‰ 

## Device

### switch:data-link layer

### *Modes of NIC* Network interface card

â€¢ **Broadcast:** *accept* *broadcast* *frames (address FF:FF:FF:FF:FF:FF)*

â€¢ **Multicast:** *accept* *all groupcast* *frames (even if it is not a member of*

*the group)*

â€¢ **Direct:** *accept frames only destinated to itself (unicast address)*

â€¢ **Promiscuous** **æ··æ‚****:** *accept* *all* *frames - thatâ€™s how Wireshark works*

â€¢ *NIC of a switch/bridge works in this mode.*

*default mode of a NIC: Broadcast + Direct*

è·¯ç”±å™¨ç½‘å¡å±äºæ··æ‚æ¨¡å¼

# Network

è·¯ç”±å™¨è¿æ¥çš„Heterogeneous Network: datalink  physical

è·¯ç”±å™¨ä¸è½¬å‘å¹¿æ’­æ¶ˆæ¯ èƒ½åˆ†ç¦»å¹¿æ’­åŸŸ

åœ¨è·¯ç”±å™¨äº’è¿çš„å¤šä¸ªå±€åŸŸç½‘çš„ç»“æ„ä¸­ï¼Œè¦æ±‚æ¯ä¸ªå±€åŸŸç½‘ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚åè®®å¯ä»¥ä¸åŒï¼Œè€Œç½‘ç»œå±‚ä»¥ä¸Šçš„é«˜å±‚åè®®å¿…é¡»ç›¸åŒ.



## 5.1 NETWORK LAYER DESIGN ISSUES

ç½‘ç»œæœåŠ¡æä¾›å•† (ISP ï¼‰ Network service providers

connectionless: å¦‚æœæä¾›çš„æ˜¯æ— è¿æ¥çš„æœåŠ¡ï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰çš„æ•°æ®åŒ…éƒ½è¢«ç‹¬ç«‹åœ°æ³¨å…¥åˆ°ç½‘ç»œä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®åŒ…ç‹¬ç«‹è·¯ç”±ï¼Œä¸éœ€è¦æå‰å»ºç«‹ä»»ä½•è®¾ç½®ã€‚åœ¨è¿™æ ·çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ•°æ®åŒ…é€šå¸¸ç§°ä¸ºæ•°æ®æŠ¥ï¼ˆdatagram ï¼‰ï¼Œå®ƒç±»ä¼¼äºç”µæŠ¥ï¼ˆtelegram),å¯¹åº”çš„ç½‘ç»œç§°ä¸ºæ•°æ®æŠ¥ç½‘ç»œï¼ˆ datagram network ï¼‰

connection-oriented:åœ¨å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œå¿…é¡»é¦–å…ˆå»ºç«‹èµ·ä¸€æ¡ä»æºè·¯ç”±å™¨åˆ°ç›®æ ‡è·¯ç”±å™¨ä¹‹é—´çš„è·¯å¾„ã€‚è¿™ä¸ªè¿æ¥ç§°ä¸ºè™šç”µè·¯ VC, virtual circuit ï¼‰ï¼Œå®ƒç±»ä¼¼äºç”µè¯ç³»ç»Ÿä¸­å»ºç«‹çš„ç‰©ç†ç”µè·¯ï¼Œå¯¹åº”çš„ç½‘ç»œç§°ä¸ºè™šç”µè·¯ç½‘ç»œï¼ˆ virtual-circuit network)ã€‚*Packets in the same traffic* *flow follow the same path.* *Routing tables are fixed.*alse called labeling switch.

ä¸€ç§é¢å‘è¿æ¥çš„ç½‘ç»œæœåŠ¡ä¾‹å­æ˜¯å¤šåè®®æ ‡ç­¾äº¤æ¢ï¼ˆMPLS, MultiProtocol Label Switching ï¼‰

 ![image-20240106125238928](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106125238928.png)

## 5.2 ROUTING ALGORITHMS

è·¯ç”±ç®—æ³•åˆ†ä¸ºï¼šstaticé™æ€è·¯ç”±ç®—æ³•(éè‡ªé€‚åº”)ã€dynamicåŠ¨æ€è·¯ç”±ç®—æ³•(è‡ªé€‚åº”)ã€‚

### 5.2.4*Distance Vector Routing*ï¼šdynamic.

ç®€è¿°ï¼š
æ…¢æ”¶æ•›
åœ¨è·ç¦»-å‘é‡è·¯ç”±ç®—æ³•ä¸­ï¼Œæ‰€æœ‰ç»“ç‚¹éƒ½å®šæœŸåœ°å°†å®ƒä»¬çš„æ•´ä¸ªè·¯ç”±é€‰æ‹©è¡¨ä¼ é€ç»™æ‰€æœ‰ä¸ä¹‹ç›´æ¥ç›¸é‚»çš„ç»“ç‚¹ã€‚
a.é€šå‘Šæ–°çš„è·¯ç”±ï¼ŒèŠ‚ç‚¹åŠ å…¥ã€‚
b.é€šå‘Šå·²æœ‰è·¯ç”±ï¼Œæ›´çŸ­æ›¿æ¢ã€‚
RIP .
**Bellman-Ford** **Routing Algorithm** 1.initialization (detention node)2.*For each node* ğ‘£ â‰  ğ‘‘*, for each neighbor w of v*,  ğ· ğ‘£ *by* ğ· ğ‘£ â† min{ğ·(ğ‘¤) + ğ‘™(ğ‘£, ğ‘¤)}   util to *Converge*
æœ‰**Count-to-Infinity**çš„ç‰¹ç‚¹ã€‚good news fast. bad news infinity.

### 5.2.5 *Link State Routing*ï¼š global router information.

ç®€è¿°ï¼š
æœ‰å¿«é€Ÿæ”¶æ•›ä¼˜ç‚¹
1.å‘ç°å®ƒçš„é‚»å±…èŠ‚ç‚¹ï¼Œå¹¶äº†è§£å…¶ç½‘ç»œåœ°å€ã€‚nodeå‘é€helloç»™æ¯ä¸ªp2pï¼Œreceiverè¦ *reply with its address**.*
2.è®¾ç½®åˆ°æ¯ä¸ªé‚»å±…èŠ‚ç‚¹çš„è·ç¦»æˆ–è€…æˆæœ¬åº¦é‡å€¼ã€‚*Send* *an* **ECHO** *packet over each link*ã€‚*Nodes who receives an* **ECHO** *packet is required to**respond immediately*ã€‚æ ¹æ®æ—¶é—´æ¥è®¾ç½®æˆæœ¬å€¼ã€‚
3.æ„é€ ä¸€ä¸ªåŒ…å«æ‰€æœ‰åˆšåˆšè·çŸ¥çš„é“¾è·¯ä¿¡æ¯åŒ… *Link State packet* ã€‚å†…å®¹é¦–å…ˆæ˜¯å‘é€æ–¹çš„æ ‡è¯†ç¬¦ï¼Œæ¥ç€æ˜¯ä¸€ä¸ªåºå·ï¼ˆ Seq ï¼‰å’Œå¹´é¾„(Age),ä»¥åŠä¸€ä¸ªé‚»å±…åˆ—è¡¨ã€‚å¯¹äºæ¯ä¸ªé‚»å±…ï¼ŒåŒæ—¶è¦ç»™å‡ºåˆ°è¿™ä¸ªé‚»å±…çš„å»¶è¿Ÿã€‚
4.å°†è¿™ä¸ªåŒ…å‘é€ç»™æ‰€æœ‰å…¶ä»–çš„è·¯ç”±å™¨ï¼Œå¹¶æ¥æ”¶æ¥è‡ªæ‰€æœ‰å…¶ä»–è·¯ç”±å™¨çš„ä¿¡æ¯åŒ…ã€‚
å‘é€ï¼šflooding æ³›æ´ªæ³•ã€‚åºå·éšç€æ¯æ–°å‘ä¸€ä¸ªåŒ…è€Œé€’å¢ã€‚
æ¥æ”¶ï¼šè·¯ç”±å™¨è®°å½•ä¸‹å®ƒæ‰€çœ‹åˆ°çš„æ‰€æœ‰ï¼ˆæºè·¯ç”±å™¨ã€åºå·ã€‰å¯¹ã€‚æ–°çš„è½¬å‘ï¼ˆé™¤äº†æºå¤´ï¼‰ã€‚é‡å¤ã€å°äºä¸¢å¼ƒã€‚
age: --1 æ¯ç§’ã€‚ *guarantees only live information are distributed*
5.è®¡ç®—å‡ºåˆ°æ¯ä¸ªå…¶ä»–è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ã€‚Dijkstraâ€™s algorithm
OSFPã€‚

**

```
#initialization
N<-{s}
for v not in N do:
	D(v)<-l(s,v)
#compute
while there is remaining nodes that are not in N do:
	w<-argmin {D(v)| v is not in N}
	N<-N U {w}
    for v not in N do:
		D(v)<-min{D(w)+l(w,v),D(v)}	
```

**

| Step | Set N       | D(B),p(B) | D(C),p(c) | D(D),p(D) | **D(E), p(E)** | **D(F), p(F)** |
| ---- | ----------- | --------- | --------- | --------- | -------------- | -------------- |
| 0    | A           | 4,A       | 1,A       | âˆ         | âˆ              | âˆ              |
| 1    | A,C         | 3,C       | 1,A       | âˆ         | 4,C            | âˆ              |
| 2    | A,C,B       | 3,C       | 1,A       | 8,B       | 4,C            | 12,B           |
| 3    | A,C,B,E     | 3,C       | 1,A       | 5,E       | 4,C            | 7,E            |
| 4    | A,C,B,E,D   | 3,C       | 1,A       | 5,E       | 4,C            | 6,D            |
| 5    | A,C,B,E,D,F | 3,C       | 1,A       | 5,E       | 4,C            | 6,D            |

### 5.2.6 å±‚æ¬¡è·¯ç”±*Hierarchical Routing - in Reality*

å½“ç½‘ç»œè§„æ¨¡æ‰©å¤§æ—¶ï¼Œè·¯ç”±å™¨çš„è·¯ç”±è¡¨æˆæ¯”ä¾‹åœ°å¢å¤§ã€‚è¿™ä¸ä»…ä¼šæ¶ˆè€—è¶Šæ¥è¶Šå¤šçš„è·¯ç”±å™¨ç¼“å†²åŒºç©ºé—´ï¼Œè€Œä¸”éœ€è¦ç”¨æ›´å¤šCPUæ—¶é—´æ¥æ‰«æè·¯ç”±è¡¨ï¼Œç”¨æ›´å¤šçš„å¸¦å®½æ¥äº¤æ¢è·¯ç”±çŠ¶æ€ä¿¡æ¯ã€‚å› æ­¤è·¯ç”±é€‰æ‹©å¿…é¡»æŒ‰ç…§å±‚æ¬¡çš„æ–¹å¼è¿›è¡Œã€‚ **Routers are organized into regions or autonomous systems (ASs)***The routing algorithm running within an AS is called an intra-autonomous (***intra-AS***) system* *routing protocol (e.g.,* *RIP and OSPF**).*  å¤–éƒ¨ï¼šBGP

### 5.2.7 broadcasting route å¹¿æ’­è·¯ç”±

**Send a separate packet to each destination**

**Use flooding**

 **Spanning tree***: a subset of the subnet that includes all routers but contains no loops*. link state routingå¯ä»¥ã€‚distance vectorä¸å¯ä»¥

**Reverse path forwarding ä¸€ç§å—æ§åˆ¶çš„æ³›æ´ªæ³•**

> å½“ä¸€ä¸ªå¹¿æ’­æ•°æ®åŒ…åˆ°è¾¾ä¸€ä¸ªè·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨æ£€æŸ¥å®ƒåˆ°æ¥çš„é‚£æ¡çº¿è·¯æ˜¯å¦æ­£æ˜¯é€šå¸¸ç”¨æ¥ç»™å¹¿æ’­æºç«¯å‘é€æ•°æ®åŒ…ç”¨çš„é‚£æ¡çº¿è·¯ã€‚å¦‚æœæ˜¯ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªæå¥½çš„æœºä¼šï¼Œè¯¥å¹¿æ’­æ•°æ®åŒ…æ˜¯æ²¿ç€æœ€ä½³è·¯å¾„è¢«è½¬å‘è¿‡æ¥çš„ï¼Œå› è€Œæ˜¯åˆ°è¾¾å½“å‰è·¯ç”±å™¨çš„ç¬¬ä¸€ä»½å‰¯æœ¬ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œåˆ™è·¯ç”±å™¨å°†è¯¥æ•°æ®åŒ…è½¬å‘åˆ°é™¤äº†åˆ°æ¥çš„é‚£æ¡çº¿è·¯ä¹‹å¤–çš„æ‰€æœ‰å…¶ä»–çº¿è·¯ä¸Šã€‚ç„¶è€Œï¼Œå¦‚æœå¹¿æ’­æ•°æ®åŒ…æ˜¯ä»å…¶ä»–ä»»ä½•ä¸€æ¡å¹¶éé¦–é€‰çš„åˆ°è¾¾å¹¿æ’­æºçš„çº¿è·¯å…¥å¢ƒçš„è¯ï¼Œè¯¥æ•°æ®åŒ…è¢«å½“ä½œä¸€ä¸ªå¯èƒ½çš„é‡å¤æ•°æ®åŒ…è€Œä¸¢å¼ƒã€‚

### 5.2.8 ç»„æ’­è·¯ç”±

link state routingï¼šç›´æ¥ç”¨spanning tree

Distance Vector Routing

## SDN *Software-Defined Network*

> è½¯ä»¶å®šä¹‰ç½‘ç»œï¼ˆSDNï¼‰æ˜¯è¿‘å¹´æµè¡Œçš„ä¸€ç§åˆ›æ–°ç½‘ç»œæ¶æ„ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼çš„æ§åˆ¶å¹³é¢å’Œåˆ†å¸ƒå¼çš„æ•°æ®å¹³é¢ï¼Œä¸¤ä¸ªå¹³é¢ç›¸äº’åˆ†ç¦»ï¼Œæ§åˆ¶å¹³é¢åˆ©ç”¨æ§åˆ¶-æ•°æ®æ¥å£å¯¹æ•°æ®å¹³é¢ä¸Šçš„è·¯ç”±å™¨è¿›è¡Œé›†ä¸­å¼æ§åˆ¶ï¼Œæ–¹ä¾¿è½¯ä»¶æ¥æ§åˆ¶ç½‘ç»œã€‚
>
> è¿œç¨‹æ§åˆ¶å™¨æŒæ¡å„ä¸»æœºå’Œæ•´ä¸ªç½‘ç»œçš„çŠ¶æ€ï¼Œ 
>
> ä¸ºæ¯ä¸ªåˆ†ç»„è®¡ç®—å‡ºæœ€ä½³è·¯ç”±ï¼Œé€šè¿‡Openflowåè®®ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–é€”å¾„ï¼‰å°†è½¬å‘è¡¨ï¼ˆåœ¨SDNä¸­ç§°ä¸ºæµè¡¨ï¼‰ä¸‹å‘ç»™è·¯ç”±å™¨ã€‚è·¯ç”±å™¨çš„å·¥ä½œå¾ˆå•çº¯ï¼Œå³æ”¶åˆ°åˆ†ç»„ã€æŸ¥æ‰¾è½¬å‘è¡¨ã€è½¬å‘åˆ†ç»„ã€‚

SDNæä¾›çš„ç¼–ç¨‹æ¥å£ç§°ä¸ºåŒ—å‘æ¥å£ï¼ŒåŒ—å‘æ¥å£æä¾›äº†ä¸€ç³»åˆ—ä¸°å¯Œçš„APLå¼€å‘è€…å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè®¾è®¡è‡ªå·±çš„åº”ç”¨ï¼Œè€Œä¸å¿…å…³å¿ƒåº•å±‚çš„ç¡¬ä»¶ç»†èŠ‚ã€‚

SDNæ§åˆ¶å™¨å’Œè½¬å‘è®¾å¤‡å»ºç«‹åŒå‘ä¼šè¯çš„æ¥å£ç§°ä¸ºå—å‘æ¥å£ï¼Œé€šè¿‡ä¸åŒçš„å—å‘æ¥å£åè®®ï¼ˆå¦‚Openflowï¼‰, SDNæ§åˆ¶å™¨å°±å¯å…¼å®¹ä¸åŒçš„ç¡¬ä»¶è®¾å¤‡ï¼ŒåŒæ—¶å¯ä»¥åœ¨è®¾å¤‡ä¸­å®ç°ä¸Šå±‚åº”ç”¨çš„é€»è¾‘ã€‚

SDNæ§åˆ¶å™¨é›†ç¾¤å†…éƒ¨æ§åˆ¶å™¨ä¹‹é—´çš„é€šä¿¡æ¥å£ç§°ä¸ºä¸œè¥¿å‘æ¥å£ï¼Œç”¨äºå¢å¼ºæ•´ä¸ªæ§åˆ¶å¹³é¢çš„å¯é æ€§å’Œå¯æ‹“å±•æ€§ã€‚

![image-20240106212255718](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106212255718.png)

## 5.3 æ‹¥å¡æ§åˆ¶ç®—æ³•

**Two Types of Solutions**ï¼š
**Open-loop***: NO runtime feedback, to prevent the problem before it happens
***Closed-loop***: Use* *feedback* *(measurements of the* *system performance**) to make* *corrections* *at runtime*

*The Networking Layer Solution*ï¼š**Active Queue Management (AQM) at routers**

â€¢ **Drop-tail***: when congestion is detected, drop newly incoming packets.*

â€¢ **Random Early Detection** *(RED): When congestion is going to happen, randomly select* *and drop packets in the buffer.*

â€¢ **Early Congestion Notification** *(ECN)*

â€¢ *Others.*

## 5.4 æœåŠ¡è´¨é‡

### 5.4.1 åº”ç”¨éœ€æ±‚

ä»ä¸€ä¸ªæºç«¯å‘åˆ°ä¸€ä¸ªæ¥æ”¶æ–¹çš„æ•°æ®åŒ…æµç§°ä¸ºä¸€ä¸ªæµ Cflow) (Clark, 1988 ï¼‰ã€‚
åœ¨é¢å‘è¿æ¥çš„ç½‘ç»œä¸­ï¼Œä¸€ä¸ªæµæˆ–è®¸æ˜¯ä¸€ä¸ªè¿æ¥ä¸Šçš„å…¨éƒ¨æ•°æ®åŒ…ï¼š
è€Œåœ¨æ— è¿æ¥ç½‘ç»œä¸­ï¼Œä¸€ä¸ªæµæ˜¯ä»ä¸€ä¸ªè¿›ç¨‹å‘åˆ°å¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰æ•°æ®åŒ…ã€‚
æ¯ä¸ªæµçš„éœ€æ±‚å¯ç”±å››ä¸ªä¸»è¦å‚æ•°æ¥è¡¨ç¤ºï¼šå¸¦å®½ã€å»¶è¿Ÿã€æŠ–åŠ¨å’Œä¸¢å¤±ã€‚æ€»ä¹‹ï¼Œè¿™äº›å‚æ•°å†³å®šäº†ä¸€ä¸ªæµè¦æ±‚çš„æœåŠ¡è´¨é‡ï¼ˆQoS, Quality of Service ï¼‰

### 5.4.2 æµé‡æ•´å½¢ traffic shaping

æŒ‡è°ƒèŠ‚è¿›å…¥ç½‘ç»œçš„æ•°æ®æµçš„å¹³å‡é€Ÿç‡å’Œçªå‘æ€§æ‰€é‡‡ç”¨çš„æŠ€æœ¯ã€‚

leaky bucket:ğ‘‹< ğ‘ , ğ‘  + ğ‘¡> â‰¤ ğ‘€t
token bucket:ğ‘‹ <ğ‘ , ğ‘  + ğ‘¡ >â‰¤ min{ğ‘€ğ‘¡, ğœŒğ‘¡ + ğ¶}

<img src="è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106205016463.png" alt="image-20240106205016463" style="zoom:50%;" />

### 5.4.3 åŒ…è°ƒåº¦  packet scheduling algorithms

FIFO

PQ:*Priority Queuing*ï¼šã€‚é«˜ä¼˜å…ˆçº§æ•°æ®åŒ…å§‹ç»ˆå…ˆäºä»»ä½•ç¼“å†²çš„ä½ä¼˜å…ˆçº§æ•°æ®åŒ…å‘é€ã€‚å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„æ•°æ®åŒ…æŒ‰ç…§ FIFO é¡ºåºå‘é€ã€‚

*Round Robin* 

*Weighted Fair Queuing (WFQ)*ï¼šé€šè¿‡ç»™é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—æ›´å¤§çš„æƒé‡ï¼Œä¾‹å¦‚ï¼Œé«˜ä¼˜å…ˆçº§æ•°æ®åŒ…å¾€å¾€ä¼šè¿ç»­å‘é€å¥½å‡ ä¸ªï¼ˆå› ä¸ºåªæœ‰ç›¸å¯¹è¾ƒå°‘çš„æ•°æ®åŒ…å…·æœ‰é«˜ä¼˜å…ˆçº§ã€‰ï¼Œç„¶è€Œï¼Œå³ä½¿å­˜åœ¨é«˜ä¼˜å…ˆçº§çš„æµé‡ï¼Œä»ç„¶æœ‰ä¸€å®šæ¯”ä¾‹çš„ä½ä¼˜å…ˆçº§æ•°æ®åŒ…è¢«é™†ç»­å‘é€ã€‚

### 5.4.4 å‡†å…¥æ§åˆ¶*Admission Control*

> ç”¨æˆ·å‘ç½‘ç»œæä¾›ä¸€ä¸ªæœ‰ QoS éœ€æ±‚çš„æµé‡ï¼šç„¶åï¼Œç½‘ç»œæ ¹æ®è‡ªå·±çš„å®¹é‡ä»¥åŠå‘å…¶ä»–æµåšå‡ºçš„æ‰¿è¯ºå†³å®šæ˜¯å¦æ¥å—æˆ–æ‹’ç»è¯¥æµã€‚å¦‚æœæ¥å—ï¼Œç½‘ç»œå°±è¦æå‰åœ¨è·¯ç”±å™¨ä¸Šé¢„ç•™å®¹é‡ï¼Œä»¥ä¾¿ä¿è¯æ–°æµå‘é€æ—¶çš„æœåŠ¡è´¨é‡ã€‚

â€¢ **QoS Routing:** *Reservations made along the route.*

â€¢ **Flow Negotiating:** *Application and routers agree on a set of flow*  *parameters, which is called a* **flow specification***.*



â€¢ **Best effort model**

â€¢ *Every user receives the same level of service.*

â€¢ *Congestion results in severe degradation to applications requiring some min amount*  *of bandwidth/delay.*

â€¢ **Integrated services model**

â€¢ *Requires resources (bandwidth/buffers) to be explicitly reserved for each traffic flow* -> RSVP signaling protocol* Resource reSerVation Protocol 

â€¢ *Requires packet classification, packet scheduling and CAC (call admission control) * 

â€¢ **Differentiated services (DiffServ) model**

â€¢ *Scalable and flexible services based on â€œclassâ€ of traffic*

## 5.6 Internet Network layer

name å’Œaddressçš„ä¸€äº›åŸåˆ™ï¼šä¸ä¼šç¡¬ç¼–ç ï¼Œ å¯ä»¥æ”¹å˜ï¼› å”¯ä¸€çš„åœ°å€ï¼›åç§°ä¸åŒºåˆ†å¤§å°çš„ASCIIï¼›åœ°å€å®¹æ˜“è¿›è¡ŒäºŒè¿›åˆ¶è¿ç®—ï¼›

### 5.6.1 1Pv4 åè®® ï¼ˆheaderï¼‰

![image-20240106215643974](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106215643974.png)

ç‰ˆæœ¬ï¼ˆVersion ï¼‰å®‡æ®µè®°å½•äº†æ•°æ®æŠ¥å±äºåè®®å“ªä¸ªç‰ˆæœ¬ã€‚

ç”±äºå¤´çš„é•¿åº¦ä¸å›ºå®šï¼Œæ‰€ä»¥å¤´çš„ IHL å®‡æ®µæŒ‡æ˜äº†å¤´åˆ°åº•æœ‰å¤šé•¿ï¼ˆä»¥ 32 ä½,**4Bä¸ºå•ä½**ï¼‰ã€‚ IHL çš„æœ€å°å€¼ä¸º 5ï¼Œè¿™è¡¨æ˜å¤´æ²¡æœ‰å¯é€‰é¡¹ã€‚è¯¥ ä½å®‡æ®µçš„æœ€å¤§å€¼ä¸º 15 ï¼ŒæŠŠå¤´çš„é•¿åº¦é™åˆ¶ä¸ºæœ€å¤§ 60 å­—èŠ‚ï¼Œå› æ­¤é€‰é¡¹ï¼ˆ Options ï¼‰å®‡æ®µæœ€å¤šä¸º 40 å­—èŠ‚

æ€»é•¿åº¦ ã€‚å­—æ®µåŒ…å«äº†è¯¥æ•°æ®æŠ¥ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œå³å¤´å’Œæ•°æ®ã€‚æœ€å¤§é•¿åº¦æ˜¯65 535 ä¸ªå­—èŠ‚ã€‚ç›®å‰æƒ…å†µä¸‹ï¼Œè¿™æ ·çš„ä¸Šç•Œè¿˜æ˜¯å¯ä»¥å®¹å¿çš„ï¼Œä½†åœ¨æœªæ¥ç½‘ç»œä¸­ï¼Œå¯èƒ½éœ€è¦æ›´å¤§çš„æ•°æ®æŠ¥ã€‚

æ€»é•¿åº¦1Bä¸ºå•ä½

æ ‡è¯†ï¼ˆ Identification ï¼‰å®‡æ®µçš„ç”¨é€”æ˜¯è®©ç›®æ ‡ä¸»æœºç¡®å®šä¸€ä¸ªæ–°åˆ°è¾¾çš„åˆ†æ®µå±äºå“ªä¸€ä¸ªæ•°æ®æŠ¥ã€‚åŒä¸€ä¸ªæ•°æ®æŠ¥çš„æ‰€æœ‰æ®µåŒ…å«åŒæ ·çš„æ ‡è¯†å€¼ã€‚

æ‰€ä»¥IPåœ°å€éƒ½æ˜¯32ä½çš„

IPé¦–éƒ¨ä¸­çš„æ ‡å¿—ä½å 3ä½ï¼Œä½†åªæœ‰å2ä½æœ‰æ„ä¹‰,åˆ†åˆ«æ˜¯MFä½ï¼ˆMore Fragmentï¼‰å’ŒDFä½ï¼ˆDon't Fragmentï¼‰ã€‚åªæœ‰å½“DF = 0æ—¶ï¼Œè¯¥IPæ•°æ®æŠ¥æ‰å¯ä»¥è¢«åˆ†ç‰‡ã€‚MFåˆ™ç”¨æ¥å‘ŠçŸ¥ç›®çš„ä¸»æœºè¯¥IPæ•°æ®æŠ¥æ˜¯å¦ä¸ºåŸå§‹æ•°æ®æŠ¥çš„æœ€åä¸€ä¸ªç‰‡ã€‚å½“MF= 1æ—¶ï¼Œè¡¨ç¤ºç›¸åº”çš„åŸå§‹æ•°æ®æŠ¥è¿˜æœ‰åç»­çš„ç‰‡ï¼›å½“MF = 0æ—¶ï¼Œè¡¨ç¤ºè¯¥æ•°æ®æŠ¥æ˜¯ç›¸åº”åŸå§‹æ•°æ®æŠ¥çš„æœ€åä¸€ä¸ªç‰‡ã€‚ç›®çš„ä¸»æœºåœ¨å¯¹ç‰‡è¿›è¡Œé‡ç»„æ—¶ï¼Œä½¿ç”¨ç‰‡åç§»å­—æ®µæ¥ç¡®å®šç‰‡åº”æ”¾åœ¨åŸå§‹IPæ•°æ®æŠ¥çš„å“ªä¸ªä½ç½®ã€‚**8Bä¸ºå•ä½**ã€‚(åç§»çš„å­—èŠ‚è¦é™¤ä»¥8å“¦)

**å› æ­¤é™¤äº†æœ€åä¸€åˆ†ç‰‡ï¼Œå…¶ä»–æ¯ä¸ªåˆ†ç‰‡çš„æ•°æ®éƒ¨åˆ†é•¿åº¦éƒ½æ˜¯8Bçš„æ•´æ•°å€ã€‚**

åè®®å­—æ®µè¡¨ç¤ºä½¿ç”¨IPçš„ä¸Šå±‚åè®®ï¼Œå¦‚å€¼ä¸º6è¡¨ç¤ºTCP,å€¼ä¸º17è¡¨ç¤ºUDP  ç‰ˆæœ¬å­—æ®µè¡¨ç¤ºIPçš„ç‰ˆæœ¬ï¼Œå€¼ä¸º4è¡¨ç¤ºIPv4,å€¼ä¸º6è¡¨ç¤ºIPv6ã€‚

ç”Ÿå­˜æœŸè¡¨ç¤ºä¸€ä¸ªsegmentæœ€å¤šå¯ä»¥è·³è½¬çš„æ¬¡æ•°

**checksumåªæ£€æŸ¥å¤´éƒ¨**

IPæ•°æ®æŠ¥åˆ†ç‰‡ï¼šä¸€ä¸ªé“¾è·¯å±‚æ•°æ®æŠ¥èƒ½æ‰¿è½½çš„æœ€å¤§æ•°æ®é‡ç§°ä¸ºæœ€å¤§ä¼ é€å•å…ƒï¼ˆMTUï¼‰ã€‚ å½“IPæ•°æ®æŠ¥çš„æ€»é•¿åº¦å¤§äºé“¾è·¯MTUæ—¶ï¼Œå°±éœ€è¦å°†IPæ•°æ®æŠ¥ä¸­çš„æ•°æ®åˆ†è£…åœ¨å¤šä¸ªè¾ƒå°çš„IPæ•°æ®æŠ¥ä¸­ï¼Œè¿™äº›è¾ƒå°çš„æ•°æ®æŠ¥ç§°ä¸ºç‰‡(segment)ã€‚

### 5.6.2 IP Addresses

ä¸€ä¸ª IP åœ°å€å¹¶ä¸çœŸæ­£æŒ‡å‘ å°ä¸»æœºï¼Œè€Œæ˜¯æŒ‡å‘ 1ä¸ªç½‘ç»œæ¥å£ï¼Œæ‰€ä»¥å¦‚æœä¸€å°ä¸»æœºåœ¨ä¸¤ä¸ªç½‘ç»œä¸Šï¼Œå®ƒå¿…é¡»æœ‰ä¸¤ä¸ª åœ°å€ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°ä¸»æœºéƒ½è¿åœ¨ä¸€ä¸ªç½‘ç»œï¼Œå› è€Œåªæœ‰1ä¸ª IP åœ°å€ã€‚

 è·¯ç”±å™¨æœ‰å¤šä¸ªæ¥å£ï¼Œä»è€Œæœ‰å¤šä¸ª IPåœ°å€ã€‚

IPåœ°å€æœ‰å±‚æ¬¡æ€§ï¼š**Hierarchical**ï¼š*2-level (initially) -> 3-level (later)*

â€¢ *2-level: network id + host id*

â€¢ *3-level: network id + subnet id + host id*

MACåœ°å€ï¼ˆethernetåœ°å€ï¼‰å°±æ²¡æœ‰å±‚æ¬¡æ€§ã€‚

IPåœ°å€æœ‰classful:  *Class A, B, C (initially) ->classful subnet -> CIDR (later)ï¼Œ*Prefix* **å‰ç¼€** *and mask* **æ©ç **

#### åˆ†ç±»å¯»å€ï¼šclassful  addressing + 2-level( network+host)ä¸åŠ maskçš„å°±æ˜¯åˆ†ç±»åœ°å€

![image-20240106132912653](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106132912653.png)

IP åœ°å€åˆ†ç±»åŒæ—¶æ”¯æŒç»„æ’­ (D ç±»åœ°å€)ï¼Œå³æ•°æ®åŒ…è¢«ç›´æ¥å‘é€ç»™å¤šå°ä¸»æœºã€‚

ç‰¹æ®Šç”¨é€”ip:å³IPåœ°å€:: = <ç½‘ç»œå·,ä¸»æœºå·ï¼

- ä¸»æœºå·å…¨ä¸º0è¡¨ç¤ºæœ¬ç½‘ç»œæœ¬èº«ï¼Œå¦‚202.98.174.0\

- ä¸»æœºå·å…¨ä¸º1è¡¨ç¤ºæœ¬ç½‘ç»œçš„å¹¿æ’­åœ°å€ï¼Œåˆç§°ç›´æ¥å¹¿æ’­åœ°å€ï¼Œå¦‚202.98.174.255  (ä¸ç”¨äºæºåœ°å€ ç›®çš„åœ°å€)

- 127.x.x.xä¿ç•™ä¸ºç¯å›è‡ªæ£€ï¼ˆLoopback Testï¼‰åœ°å€ï¼Œæ­¤åœ°å€è¡¨ç¤ºä»»æ„ä¸»æœºæœ¬èº«ï¼Œç›®çš„åœ°å€ä¸ºç¯å›åœ°å€çš„IPæ•°æ®æŠ¥æ°¸è¿œä¸ä¼šå‡ºç°åœ¨ä»»ä½•ç½‘ç»œä¸Šã€‚ï¼ˆå¯ä»¥ä½œä¸ºç›®çš„åœ°å€ è¿”å›æœ¬æœºï¼‰

-  32ä½å…¨ä¸º0,å³0.0.0.0è¡¨ç¤ºæœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœºã€‚ï¼ˆå¯ä»¥ä½œä¸ºæœ¬ç½‘ç»œä¸Šæœ¬ä¸»æœºçš„ipåœ°å€ ä¸èƒ½ä½œä¸ºç›®çš„åœ°å€ï¼‰

-  32ä½å…¨ä¸º1,å³255.255.255.255è¡¨ç¤ºæ•´ä¸ªTCP/IPç½‘ç»œçš„å¹¿æ’­åœ°å€ï¼Œåˆç§°å—é™å¹¿æ’­åœ°å€ã€‚ 

  å®é™…ä½¿ç”¨æ—¶ï¼Œç”±äºè·¯ç”±å™¨å¯¹å¹¿æ’­åŸŸçš„éš”ç¦»ï¼Œ255.255.255.255ç­‰æ•ˆä¸ºæœ¬ç½‘ç»œçš„å¹¿æ’­åœ°å€ã€‚ 

**Unicast Addresses**:192.168.1.10

Multicast Addresses: 224.0.0.1

Broadcast Addresses:192.168.1.255

 ç½‘ç»œåœ°å€è½¬æ¢ ï¼ˆ NAT ï¼‰ å°†ä¸“ç”¨ç½‘ç»œåœ°å€ï¼ˆå¦‚**Intranet****ï¼‰**è½¬æ¢ä¸ºå…¬ç”¨åœ°å€ï¼ˆå¦‚**Internet****ï¼‰,ä»è€Œå¯¹å¤–éšè—å†…éƒ¨ç®¡ç†çš„**IP**åœ°å€ã€‚NATæ˜¯ç”±ç®¡ç†å‘˜å‘¢é…ç½®çš„ æ‰¾ä¸åˆ°å°±ä¸¢å¼ƒä¸è½¬å‘ã€‚                                  

>  ä¸ºäº†ç½‘ç»œå®‰å…¨ï¼Œåˆ’å‡ºäº†éƒ¨åˆ†**IP**åœ°å€ä¸ºç§æœ‰**IP**åœ°å€ã€‚ç§æœ‰**IP**åœ°å€åªç”¨äº**LAN,**ä¸ç”¨äº**WAN**è¿æ¥ï¼ˆå› æ­¤ç§æœ‰**IP**åœ°å€ä¸èƒ½ç›´æ¥ç”¨äº**Internet,**å¿…é¡»é€šè¿‡ç½‘å…³åˆ©ç”¨**NAT**æŠŠç§æœ‰**IP**åœ°å€è½¬æ¢ä¸º**Internet**ä¸­åˆæ³•çš„å…¨çƒ**IP**åœ°å€åæ‰èƒ½ç”¨äº**Internet****ï¼‰****,**å¹¶ä¸”å…è®¸ç§æœ‰**IP**åœ°å€è¢«**LAN**é‡å¤ä½¿ç”¨ã€‚ 
>
> è¿™æœ‰æ•ˆåœ°è§£å†³äº† **IP**åœ°å€ä¸è¶³çš„é—®é¢˜ã€‚
>
> ç§æœ‰**IP**åœ°å€ç½‘æ®µå¦‚ä¸‹ï¼š 
>
> **A** ç±»ï¼š**1** ä¸ª **A** ç±»ç½‘æ®µ,å³ **10.0.0.0****ã€œ****10.255.255.255**ã€‚
>
> **B** ç±»ï¼š**16** ä¸ª **B** ç±»ç½‘æ®µï¼Œå³ **1****72.16.0.0****â€”****172.31.255.255****o**
>
> **C** ç±»ï¼š**256** ä¸ª **C** ç±»ç½‘æ®µï¼Œå³ **192.168.0.0****ã€œ****192.168.****255.255**ã€‚ 

 

#### classful  addressing + 3-level :*Subnet Addressing*

 **RFC 950, RFC 1122 â€“ host must support this.**![image-20240106135227330](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240106135227330.png)

subnet masking: 1å¯¹åº”äºIPåœ°å€ä¸­çš„ç½‘ç»œå·åŠå­ç½‘å·ï¼Œè€Œ0å¯¹åº”äºä¸»æœºå·

ä½¿ç”¨maskçš„ï¼Œè·¯ç”±è¡¨ä¸­çš„æ¯ä¸ªæ¡ç›®ï¼Œé™¤è¦ç»™å‡ºç›®çš„ç½‘ç»œåœ°å€å’Œä¸‹ä¸€è·³åœ°å€å¤–ï¼Œè¿˜è¦åŒæ—¶ç»™å‡ºè¯¥ç›®çš„ç½‘ç»œçš„å­ç½‘æ©ç ã€‚

#### CIDR (Classless Inter Domain Routing)

CIDRæ˜¯ä¸€ç§å½’å¹¶ç½‘ç»œçš„æŠ€æœ¯ï¼ŒCIDRæŠ€æœ¯çš„ä½œç”¨æ˜¯æŠŠå°çš„ç½‘ç»œæ±‡èšæˆå¤§çš„è¶…ç½‘ã€‚

CIDRä½¿ç”¨â€œç½‘ç»œå‰ç¼€â€çš„æ¦‚å¿µä»£æ›¿å­ç½‘ç»œçš„æ¦‚å¿µã€‚IP:: = {vç½‘ç»œå‰ç¼€ã€‰ï¼Œvä¸»æœºå·ï¼}ã€‚CIDRè™½ç„¶ä¸ä½¿ç”¨å­ç½‘ï¼Œä½†ä»ç„¶ä½¿ç”¨**â€œæ©ç â€** ä¸€è¯ã€‚ã€‚â€œCIDRä¸ä½¿ç”¨å­ç½‘â€æ˜¯æŒ‡CIDRå¹¶æ²¡æœ‰åœ¨32ä½åœ°å€ä¸­æŒ‡æ˜è‹¥å¹²ä½ä½œä¸ºå­ç½‘å­—æ®µã€‚ä½†åˆ†é…åˆ°ä¸€ä¸ªCIDRåœ°å€å—CIDR address blockçš„ç»„ç»‡ï¼Œä»å¯ä»¥åœ¨æœ¬ç»„ç»‡å†…æ ¹æ®éœ€è¦åˆ’åˆ†å‡ºä¸€äº›å­ç½‘ã€‚ä¾‹å¦‚ï¼ŒæŸç»„ç»‡åˆ†é…åˆ°åœ°å€å—/20,å°±å¯ä»¥å†ç»§ç»­åˆ’åˆ†ä¸º8ä¸ªå­ç½‘ï¼ˆä»ä¸»æœºå·ä¸­å€Ÿç”¨3ä½æ¥åˆ’åˆ†å­ç½‘ï¼‰ï¼Œè¿™æ—¶æ¯ä¸ªäºç½‘çš„ç½‘ç»œå‰ç¼€å°±å˜æˆäº† 23ä½ã€‚å…¨0å’Œå…¨1çš„ä¸»æœºå·åœ°å€ä¸€èˆ¬ä¸ä½¿ç”¨ã€‚

æŠŠå¤šä¸ªå°å‰ç¼€çš„åœ°å€å—åˆå¹¶æˆä¸€ä¸ªå¤§å‰ç¼€çš„åœ°å€å—ã€‚è¿™ä¸ªåˆå¹¶è¿‡ç¨‹ç§°ä¸ºè·¯ç”±èšåˆï¼ˆroute aggregation ï¼‰ï¼Œç”±æ­¤äº§ç”Ÿçš„è¾ƒå¤§å‰ç¼€åœ°å€å—æœ‰æ—¶ç§°ä¸ºè¶…ç½‘ï¼ˆsupernet ï¼‰ï¼Œä»¥ä¾¿æœ‰åˆ«äºåœ°å€å—çš„åˆ†å‰²ã€‚

æœ€é•¿åŒ¹é…å‰ç¼€ï¼ˆlongest matching prefix ï¼‰

### IPV6

è§£å†³**â€œ****IP**åœ°å€è€—å°½â€é—®é¢˜çš„æªæ–½æœ‰ä»¥ä¸‹ä¸‰ç§ï¼šâ‘ é‡‡ç”¨æ— ç±»åˆ«ç¼–å€**CIDR,**ä½¿**IP**åœ°å€çš„åˆ†é…æ›´åŠ åˆç†ï¼›â‘¡é‡‡ç”¨ç½‘ç»œåœ°å€è½¬æ¢**ï¼ˆ****NAT****ï¼‰**æ–¹æ³•ä»¥èŠ‚çœå…¨çƒ**IP**åœ°å€ï¼›â‘¢é‡‡ç”¨å…·æœ‰æ›´å¤§åœ°å€ç©ºé—´çš„æ–°ç‰ˆæœ¬çš„**IPv6o**å…¶ä¸­å‰ä¸¤ç§æ–¹æ³•åªæ˜¯å»¶é•¿äº† **IPv4**åœ°å€åˆ†é…å®Œæ¯•çš„æ—¶é—´ï¼Œåªæœ‰ç¬¬ä¸‰ç§æ–¹æ³•ä»æ ¹æœ¬ä¸Šè§£å†³äº† **IP**åœ°å€çš„è€—å°½é—®é¢˜ã€‚

**IPv6**çš„å­—èŠ‚æ•°**ï¼ˆ****16Bï¼‰**æ˜¯**IPv4**å­—èŠ‚æ•°**ï¼ˆ4Bï¼‰**çš„å¹³æ–¹ã€‚

**IPv6**æ•°æ®æŠ¥çš„ç›®çš„åœ°å€å¯ä»¥æ˜¯ä»¥ä¸‹ä¸‰ç§åŸºæœ¬ç±»å‹åœ°å€ä¹‹ä¸€ï¼š

**1****ï¼‰** å•æ’­ã€‚å•æ’­å°±æ˜¯ä¼ ç»Ÿçš„ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚

**2****ï¼‰** å¤šæ’­ã€‚å¤šæ’­æ˜¯ä¸€ç‚¹å¯¹å¤šç‚¹çš„é€šä¿¡ï¼Œåˆ†ç»„è¢«äº¤ä»˜åˆ°ä¸€ç»„è®¡ç®—æœºçš„æ¯å°è®¡ç®—æœºã€‚

**3****ï¼‰** ä»»æ’­ã€‚è¿™æ˜¯**IPv6**å¢åŠ çš„ä¸€ç§ç±»å‹ã€‚ä»»æ’­çš„ç›®çš„ç«™æ˜¯ä¸€ç»„è®¡ç®—æœºï¼Œä½†æ•°æ®æŠ¥åœ¨äº¤ä»˜æ—¶åªäº¤ä»˜å…¶ä¸­çš„ä¸€å°è®¡ç®—æœºï¼Œé€šå¸¸æ˜¯è·ç¦»æœ€è¿‘çš„ä¸€å°è®¡ç®—æœºã€‚

![image-20240108140942423](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108140942423.png)

å¤´éƒ¨8ä¸ªå­—æ®µ æ²¡æœ‰checksum ä¸å…è®¸åˆ†ç‰‡  é¦–éƒ¨é•¿åº¦ä¸å¯å˜

### 5.6.4 Internet æ§åˆ¶åè®®

The Address Resolution Protocol åœ°å€è§£æåè®®

> Host A wants to send a packet to Host B which is in the same LAN with A(in the network layer).
>
> 1. å…¶å®ç¬¬ä¸€æ­¥æ˜¯æ‰¾åˆ°Bçš„ip åœ°å€ã€‚å› ä¸ºç›®æ ‡æ¥æ”¶æ–¹å¯èƒ½æ˜¯21tongjisse.topè¿™æ ·çš„åå­—ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯æ‰¾åˆ°ä¸»æœºBçš„IPåœ°å€ï¼Œè¿™ä¸ªæŸ¥æ‰¾è¿‡ç¨‹ç”±åŸŸåç³»ç»Ÿ ***ï¼ˆDNS, Domain Name System ï¼‰***å®Œæˆï¼Œ
> 2. Host A checks if the IP address in its ARP cache.
> 3. If there is the IP address in its ARP cache,find out the corresponding MAC address,and write to the MAC frame, and then send the MAC frame to destination MAC address through the LAN.
> 4. If not,use destination MAC address FFFF-FF-FF-FF-FF to broadcast the APR request and all the hosts on LAN receive the request.
> 5. Then After receiving the ARP request, host B sends the ARP response packet (unicast delivery) to host A, which contains the mapping relationship between the IP of host B and the MAC address.
> 6. After host A receives the ARP response packet, host A will write the mapping to the ARP cache,and do the Step 2.

Reverse Address Resolution Protocol é€†åœ°å€è§£æåè®®

ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®:**Internet Control Message Protocol** ( ICMP) 

> ä¸ºäº†æé«˜**IP**æ•°æ®æŠ¥äº¤ä»˜æˆåŠŸçš„æœºä¼šï¼Œåœ¨ç½‘ç»œå±‚ä½¿ç”¨äº†ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®**(Internet** **Control****Message** **Protocol,** **ICMP)**æ¥è®©ä¸»æœºæˆ–è·¯ç”±å™¨æŠ¥å‘Šå·®é”™å’Œå¼‚å¸¸æƒ…å†µã€‚**ICMP**æŠ¥æ–‡ä½œä¸º**IP**å±‚æ•°æ®æŠ¥çš„æ•°æ®ï¼ŒåŠ ä¸Šæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œç»„æˆ**IP**æ•°æ®æŠ¥å‘é€å‡ºå»** ** **ICMP**æ˜¯ç½‘ç»œå±‚åè®®ã€‚
>
> **ICMP**æŠ¥æ–‡çš„ç§ç±»æœ‰ä¸¤ç§ï¼Œå³**ICMP**å·®é”™æŠ¥å‘ŠæŠ¥æ–‡    ICMP**è¯¢é—®æŠ¥æ–‡ã€‚
>
> **2****ï¼‰** æºç‚¹æŠ‘åˆ¶ å½“è·¯ç”±å™¨æˆ–ä¸»æœºç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€æºç‚¹æŠ‘åˆ¶æŠ¥æ–‡ï¼Œä½¿æºç‚¹çŸ¥é“åº”å½“æŠŠæ•°æ®æŠ¥çš„å‘é€é€Ÿç‡æ”¾æ…¢ã€‚
>
> **ICMP**çš„ä¸¤ä¸ªå¸¸è§åº”ç”¨æ˜¯åˆ†ç»„ç½‘é—´æ¢æµ‹**PING**å’Œ**Traceroute**
>
> **PING**ä½¿ç”¨äº† **ICMP**å›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ã€‚**PING**å·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œå®ƒç›´æ¥ä½¿ç”¨ç½‘ç»œå±‚çš„**ICMP,**è€Œæœªä½¿ç”¨ä¼ è¾“å±‚çš„**TCP**æˆ–**UDP**
>
> **Traceroute/Tracert** å·¥ä½œåœ¨ç½‘ç»œå±‚å¯ä»¥ç”¨æ¥è·Ÿè¸ªåˆ†ç»„ç»è¿‡çš„è·¯ç”±



###  ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Ÿ 

ï¼ˆå¯ä»¥è”æƒ³ä¸‹æµ·å…³ï¼Ÿä»€ä¹ˆæ˜¯æµ·å…³ï¼Ÿï¼‰

è¿æ¥ä¸¤ä¸ªä¸åŒçš„ç½‘ç»œçš„è®¾å¤‡éƒ½å¯ä»¥å«**ç½‘å…³è®¾å¤‡**ï¼›ç½‘å…³çš„ä½œç”¨å°±æ˜¯å®ç°ä¸¤ä¸ªç½‘ç»œä¹‹é—´è¿›è¡Œé€šè®¯ä¸æ§åˆ¶ã€‚

ç½‘å…³è®¾å¤‡å¯ä»¥æ˜¯ äº¤äº’æœºï¼ˆä¸‰å±‚åŠä»¥ä¸Šæ‰èƒ½è·¨ç½‘ç»œï¼‰ã€è·¯ç”±å™¨ã€å¯ç”¨äº†è·¯ç”±åè®®çš„æœåŠ¡å™¨ã€ä»£ç†æœåŠ¡å™¨ã€é˜²ç«å¢™ç­‰

**é»˜è®¤ç½‘å…³**

ä¸€å°ä¸»æœºå¯ä»¥æœ‰å¤šä¸ªç½‘å…³ã€‚é»˜è®¤ç½‘å…³çš„æ„æ€æ˜¯ä¸€å°ä¸»æœºå¦‚æœæ‰¾ä¸åˆ°å¯ç”¨çš„ç½‘å…³ï¼Œå°±æŠŠæ•°æ®åŒ…å‘ç»™é»˜è®¤æŒ‡å®šçš„ç½‘å…³ï¼Œç”±è¿™ä¸ªç½‘å…³æ¥å¤„ç†æ•°æ®åŒ…ã€‚ç°åœ¨ä¸»æœºä½¿ç”¨çš„ç½‘å…³ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯é»˜è®¤ç½‘å…³ã€‚

**é»˜è®¤ç½‘å…³å¯ä»¥ç†è§£ä¸ºç¦»å½“å‰ä¸»æœºæœ€è¿‘çš„è·¯ç”±å™¨çš„ç«¯å£åœ°å€**ï¼Œæ‰€ä»¥æ˜¯192.168.1.62,è€Œè¯¥ä¸»æœºçš„å­ç½‘æ©ç å’Œç½‘å…³çš„å­ç½‘æ©ç ä¹Ÿç›¸åŒ,/27å³ä¸º255.255.255.224ã€‚

# Transport Layer

## 6.1 ä¼ è¾“æœåŠ¡

### 6.1.1 æä¾›ç»™ä¸Šå±‚çš„æœåŠ¡

ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œä¼ è¾“å±‚éœ€è¦å……åˆ†åˆ©ç”¨ç½‘ç»œå±‚æä¾›ç»™å®ƒçš„ æœåŠ¡ã€‚åœ¨ä¼ è¾“å±‚å†…ï¼Œå®Œæˆè¿™é¡¹å·¥ä½œçš„ç¡¬ä»¶å’Œï¼æˆ–è½¯ä»¶ç§°ä¸ºä¼ è¾“å®ä½“ã€ˆtransport entity ï¼‰

- end to end â€” process to process
- multiplexing and demultiplexing:ä¸åŒçš„åº”ç”¨è¿›ç¨‹ä½¿ç”¨åŒä¸€ä¸ªä¼ è¾“å±‚åè®®ä¼ è¾“æ•°æ®ï¼›æ¥æ”¶æ–¹èƒ½å¤Ÿå‰¥å»é¦–éƒ¨äº¤ä»˜ç»™ç›¸åº”çš„åº”ç”¨è¿›ç¨‹
- åŒæ—¶æä¾›TCPå’ŒUDP ï¼ˆç½‘ç»œå±‚å°±ä¸è¡Œ è¦ä¹ˆæ•°æ®æŠ¥è¦ä¹ˆè™šç”µè·¯ï¼‰
- å·®é”™æ£€æµ‹ï¼ˆé¦–éƒ¨å’Œæ•°æ®ï¼‰ï¼ˆç½‘ç»œå±‚IPv4åªé¦–éƒ¨ IPv6ä¸è¿›è¡Œæ£€æµ‹ï¼‰

***connectionless***

***User Datagram Protocol (UDP)***

- *Unreliable, unordered, unicast/multicast delivery â€“ â€œbest-effortâ€, but quick and easy!*

***connection-oriented***

there are also two types of transport service

é‡‡ç”¨**TCP**æ—¶ï¼Œä¼ è¾“å±‚å‘ä¸Šæä¾›çš„æ˜¯ä¸€æ¡å…¨åŒå·¥çš„å¯é é€»è¾‘ä¿¡é“

å¯é å°±æ˜¯æŒ‡ ä¼šå¯¹æ•°æ®è¿›è¡Œç¡®è®¤

> **TCP**æä¾›é¢å‘è¿æ¥çš„æœåŠ¡ï¼Œåœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚
>
> **TCP**ä¸æä¾›å¹¿æ’­æˆ–ç»„æ’­æœåŠ¡ã€‚ç”±äº**TCP**æä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œå› æ­¤ä¸å¯é¿å…åœ°å¢åŠ äº†è®¸å¤šå¼€é”€ï¼Œå¦‚ç¡®è®¤ã€æµé‡æ§åˆ¶ã€è®¡æ—¶å™¨åŠè¿æ¥ç®¡ç†ç­‰ã€‚è¿™ä¸ä»…ä½¿åè®®æ•°æ®å•å…ƒçš„å¤´éƒ¨å¢å¤§å¾ˆå¤šï¼Œè¿˜è¦å ç”¨è®¸å¤šçš„å¤„ç†æœºèµ„æºã€‚å› æ­¤**TCP**ä¸»è¦é€‚ç”¨äºå¯é æ€§æ›´é‡è¦çš„åœºåˆï¼Œå¦‚æ–‡ä»¶ä¼ è¾“åè®®**ï¼ˆFTPï¼‰**ã€è¶…æ–‡æœ¬ä¼ è¾“åè®®**ï¼ˆHTTPï¼‰**ã€è¿œç¨‹ç™»å½•**ï¼ˆTELNETï¼‰**ç­‰ã€‚â€œ

**ï¼‰**æœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ç«¯å£å·ã€‚å®ƒåˆåˆ†ä¸ºä¸¤ç±»ï¼Œæœ€é‡è¦çš„ä¸€ç±»æ˜¯ç†ŸçŸ¥ç«¯å£å·ï¼Œæ•°å€¼ä¸º**0****ã€œ****1023,****IANA** ï¼ˆäº’è”ç½‘åœ°å€æŒ‡æ´¾æœºæ„ï¼‰æŠŠè¿™äº›ç«¯å£å·æŒ‡æ´¾ç»™äº† **TCP/IP**æœ€é‡è¦çš„ä¸€äº›åº”ç”¨ç¨‹åºï¼Œ è®©æ‰€æœ‰çš„ç”¨æˆ·éƒ½çŸ¥é“ã€‚å¦ä¸€ç±»ç§°ä¸ºç™»è®°ç«¯å£å·ï¼Œæ•°å€¼ä¸º**1024****ã€œ****49151**ã€‚å®ƒæ˜¯ä¾›æ²¡æœ‰ç†ŸçŸ¥ç«¯å£å·çš„åº”ç”¨ç¨‹åºä½¿ç”¨çš„ï¼Œä½¿ç”¨è¿™ç±»ç«¯å£å·å¿…é¡»åœ¨**IANA**ç™»è®°ï¼Œä»¥é˜²æ­¢é‡å¤ã€‚ 



### 6.1.2 ä¼ è¾“æœåŠ¡åŸè¯­

ä¸ºäº†å…è®¸ç”¨æˆ·è®¿é—®ä¼ è¾“æœåŠ¡ï¼Œä¼ è¾“å±‚å¿…é¡»ä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸€äº›æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæä¾›ä¸€ä¸ªä¼ è¾“æœåŠ¡æ¥å£ã€‚æ¯ä¸ªä¼ è¾“æœåŠ¡éƒ½æœ‰å®ƒè‡ªå·±çš„æ¥å£ã€‚

åº”ç”¨å±‚å°±æ˜¯ä»£è¡¨å„ç±»ç½‘ç»œè¿‡ç¨‹ï¼Œåº”ç”¨å±‚å¯¹ä¼ è¾“å±‚è°ƒç”¨ï¼Œå®é™…ä¸Šé€šè¿‡ç½‘ç»œç¼–ç¨‹æ¥å®ç°ï¼Œç½‘ç»œç¼–ç¨‹æ¥å£æ ‡å‡†æ˜¯Socket.åœ¨åº”ç”¨ç¨‹åºåŠ soccketç¼–ç¨‹æ¥å£å°±æˆä¸ºäº†ç½‘ç»œç¨‹åºã€‚

> ç½‘ç»œç¼–ç¨‹æ¨¡å‹ç§°ä¸ºå®¢æˆ·æœº/æœåŠ¡å™¨ç¼–ç¨‹æ¨¡å‹ï¼Œç”¨å®¢æˆ·æœº å’ŒæœåŠ¡å™¨åˆ†åˆ«æ ‡è¯†ä¸¤å°è¿œç¨‹è®¡ç®—æœºä¸Šè¿è¡Œä¸¤ä¸ªç½‘ç»œç¨‹åºã€‚
>
> åŸºäºä¸å¯¹ç§°çš„äº¤äº’æ¨¡å¼ï¼Œå®¢æˆ·æœºæ˜¯æŒ‡ä¸»åŠ¨åœ°å‘å‡ºäº¤äº’ çš„åº”ç”¨ä¸€æ–¹ï¼Œæ˜¯æ•°æ®ä½¿ç”¨æ–¹ï¼›æœåŠ¡å™¨æ˜¯æŒ‡è¢«åŠ¨ç­‰å¾…äº¤äº’çš„ åº”ç”¨å¦ä¸€æ–¹ï¼Œæ˜¯æ•°æ®çš„å­˜å‚¨æ–¹ï¼ŒæœåŠ¡å™¨ç«¯é›†ä¸­å­˜æ”¾äº†éœ€è¦å¤„ç†çš„å„ç±»æ•°æ®ã€‚ä½†æœåŠ¡å™¨å¿…é¡»é¦–å…ˆè¿è¡Œï¼Œç­‰å¾…å®¢æˆ·æœºçš„è®¿é—®ï¼›å®¢æˆ·æœºåè¿è¡Œï¼Œè®¿é—®æœåŠ¡ ã€‚å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´äº¤äº’çš„æ•°æ®ä¹Ÿåˆ†ä¸ºè¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ä¸¤ç±»ã€‚è¯·æ±‚æ•°æ® (Request)æ˜¯æŒ‡ä»å®¢æˆ·æœºå‘é€ç»™æœåŠ¡å™¨çš„æ¶ˆæ¯ï¼Œè€Œå“åº”æ•°æ®(Response)æ˜¯æŒ‡ç”±æœåŠ¡å™¨è¿”å›å®¢ æˆ·æœºçš„æ¶ˆæ¯ã€‚
>
> å„ç±»ç½‘ç»œåº”ç”¨ï¼Œå°½ç®¡åº”ç”¨æ–¹å¼å’Œå†…å®¹æœ‰æ‰€ä¸åŒï¼Œæ•°æ®æ ¼å¼ä¹Ÿä¸åŒï¼Œä½†ç½‘ç»œç¼–ç¨‹åŸç†å®Œå…¨ä¸€ æ ·ï¼Œå®¢æˆ·æœºå’ŒæœåŠ¡å™¨åˆ©ç”¨ä¼ è¾“å±‚è¿›è¡Œé€šä¿¡ï¼Œç›´æ¥åŒå„è‡ªçš„ä¼ è¾“å±‚äº¤äº’ï¼Œå»ºç«‹é€šä¿¡è¿æ¥å’Œæ”¶å‘æ¶ˆ æ¯ï¼Œä¼ è¾“å±‚å†è°ƒç”¨ç½‘é™…å±‚(IP)åè®®ä¼ è¾“è‡ªèº«çš„æ•°æ®åŒ…ã€‚

### 6.1.3 Berkeley å¥—æ¥å­—

ç°åœ¨è®©æˆ‘ä»¬ç®€è¦åœ°è€ƒæŸ¥å¦ä¸€ç»„ä¼ è¾“åŸè¯­ï¼Œå³ TCP æ‰€ç”¨çš„å¥—æ¥å®‡ï¼ˆsocket ï¼‰åŸè¯­ã€‚ä½œä¸º Berkeley UNIX4.2 BSD è½¯ä»¶çš„ä¸€éƒ¨åˆ†ã€‚å¥—æ¥å®‡é¦–æ¬¡å‘å¸ƒåœ¨ 1983 å¹´ï¼Œè¿™äº›åŸè¯­å¾ˆå¿«å¾—åˆ°æµè¡Œï¼Œ ç°åœ¨å·±è¢«è®¸å¤šæ“ä½œç³»ç»Ÿå¹¿æ³›åº”ç”¨äº Internet ç¨‹åºè®¾è®¡ä¸­ï¼Œå°¤å…¶æ˜¯åŸºäº UNIX çš„ç³»ç»Ÿï¼Œ Windows ç³»ç»Ÿä¹Ÿæœ‰ä¸€ä¸ªå¥—æ¥å®‡é£æ ¼çš„ API ï¼Œç§°ä¸ºâ€œwinsock â€ã€‚

è¡¨ä¸­åˆ—å‡ºçš„å‰ ä¸ªåŸè¯­ç”±æœåŠ¡å™¨æŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚ SOCKET åŸè¯­åˆ›å»ºä¸€ä¸ªæ–°çš„ç«¯ç‚¹ï¼ˆ end point ï¼‰ï¼Œå¹¶ä¸”åœ¨**ä¼ è¾“å®ä½“ä¸­ä¸ºå®ƒåˆ†é…ç›¸åº”çš„è¡¨ç©ºé—´?**ã€‚æ­¤è°ƒç”¨çš„å‚æ•°è¯´æ˜äº†é‡‡ç”¨çš„åœ°å€æ ¼å¼ã€ æ‰€éœ€çš„æœåŠ¡ç±»å‹ï¼ˆæ¯”å¦‚å¯é çš„å­—èŠ‚æµï¼‰ï¼Œä»¥åŠæ‰€ç”¨çš„åè®®ã€‚ soc è°ƒç”¨æˆåŠŸåˆ™è¿”å›ä¸€ä¸ªæ™® é€šçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä¾›åç»­çš„è°ƒç”¨ä½¿ç”¨ï¼Œ soc è°ƒç”¨ä¸å¯¹æ–‡ä»¶å®æ–½çš„ OPEN è°ƒç”¨å·¥ä½œæ–¹å¼ ä¸€æ ·ã€‚

## 6.3 æ‹¥å¡æ§åˆ¶

### æ— è¿æ¥æœåŠ¡å’Œé¢å‘è¿æ¥çš„æœåŠ¡

é¢å‘è¿æ¥æœåŠ¡å°±æ˜¯åœ¨é€šä¿¡åŒæ–¹è¿›è¡Œé€šä¿¡ä¹‹å‰ï¼Œå¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œåœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œæ•´ä¸ªè¿æ¥çš„æƒ…å†µä¸€ç›´è¢«å®æ—¶åœ°ç›‘æ§å’Œç®¡ç†ã€‚é€šä¿¡ç»“æŸåï¼Œåº”è¯¥é‡Šæ”¾è¿™ä¸ªè¿æ¥ã€‚

å¯ä»¥ä¿è¯å¯é å’Œé¡ºåºäº¤ä»˜

æ— è¿æ¥æœåŠ¡æ˜¯æŒ‡ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„é€šä¿¡ä¸éœ€è¦å…ˆå»ºç«‹å¥½è¿æ¥ï¼Œéœ€è¦é€šä¿¡æ—¶ï¼Œç›´æ¥å°†ä¿¡æ¯å‘é€åˆ°â€œç½‘ç»œâ€ä¸­ï¼Œè®©è¯¥ä¿¡æ¯çš„ä¼ é€’åœ¨ç½‘ä¸Šå°½åŠ›è€Œä¸ºåœ°å¾€ç›®çš„åœ°ä¼ é€ã€‚

ä¸æä¾›æµé‡ç®¡ç†å’Œæ‹¥å¡æ§åˆ¶ã€‚

## å¯é å’Œä¸å¯é ï¼Ÿ

å¦‚æœä¸€ä¸ªåè®®ä½¿ç”¨ç¡®è®¤æœºåˆ¶å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œç¡®è®¤ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¯é çš„åè®®ï¼›

å¦‚æœä¸€ä¸ªåè®®é‡‡ç”¨â€œå°½åŠ›è€Œä¸ºâ€çš„ä¼ è¾“æ–¹å¼ï¼Œé‚£ä¹ˆæ˜¯ä¸å¯é çš„ã€‚

ä¾‹å¦‚ï¼ŒTCPå¯¹ä¼ è¾“çš„æŠ¥æ–‡æ®µæä¾›ç¡®è®¤ï¼Œå› æ­¤æ˜¯å¯é çš„ä¼ è¾“åè®®ï¼›è€ŒUDPä¸æä¾›ç¡®è®¤ï¼Œå› æ­¤æ˜¯ä¸å¯é çš„ä¼ è¾“åè®®ã€‚

## 6.4 THE INTERNET TRANSPORT PROTOCOLS: UDP

### 6.4.1 Introduction to UDP

ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUDP, User Datagram Protocol ï¼‰ã€‚ UDP ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ç§æ— éœ€å»ºç«‹è¿æ¥å°±å¯å‘é€å°è£…çš„ IP æ•°æ®æŠ¥çš„æ–¹æ³•ã€‚

åªåœ¨IPä¸ŠåŠ å…¥ **å¤ç”¨åˆ†ç”¨ï¼Œå·®é”™æ£€æµ‹**ã€‚

**UDP**çš„é¦–éƒ¨æ ¼å¼ï¼š8B

**UDP**æ•°æ®æŠ¥åŒ…å«ä¸¤éƒ¨åˆ†ï¼š**UDP**é¦–éƒ¨å’Œç”¨æˆ·æ•°æ®ã€‚**UDP**é¦–éƒ¨æœ‰**8B,\**ç”±\**4**ä¸ªå­—æ®µç»„æˆï¼Œæ¯ä¸ªå­—æ®µçš„é•¿åº¦éƒ½æ˜¯**2B,\**å¦‚å›¾\**5.2**æ‰€ç¤ºã€‚å„å­—æ®µæ„ä¹‰å¦‚ä¸‹ï¼š

**1ï¼‰** æºç«¯å£ã€‚æºç«¯å£å·ã€‚åœ¨éœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ï¼Œä¸éœ€è¦æ—¶å¯ç”¨å…¨**0**ã€‚

**2ï¼‰** ç›®çš„ç«¯å£ã€‚ç›®çš„ç«¯å£å·ã€‚è¿™åœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡æ—¶å¿…é¡»ä½¿ç”¨åˆ°ã€‚

**3ï¼‰** é•¿åº¦ã€‚**UDP**æ•°æ®æŠ¥çš„é•¿åº¦'ï¼ˆåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ï¼‰ï¼Œå…¶æœ€å°å€¼æ˜¯**8** ï¼ˆä»…æœ‰é¦–éƒ¨ï¼‰ã€‚

**4ï¼‰** æ ¡éªŒå’Œã€‚æ£€æµ‹**UDP**æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ã€‚æœ‰é”™å°±ä¸¢å¼ƒã€‚è¯¥å­—æ®µæ˜¯å¯é€‰çš„ï¼Œå½“æºä¸»æœºä¸æƒ³è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œåˆ™ç›´æ¥ä»¤è¯¥å­—æ®µä¸ºå…¨**0**ã€‚

![image-20240108144528060](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108144528060.png)

UDPçš„äº¤ä»˜

**UDP**ä¸ä¿è¯å¯é äº¤ä»˜ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€åº”ç”¨å¯¹æ•°æ®çš„è¦æ±‚æ˜¯ä¸å¯é çš„ï¼Œæ‰€æœ‰ç»´æŠ¤å¯é æ€§çš„å·¥ä½œå¯ç”±ç”¨æˆ·åœ¨***åº”ç”¨å±‚***æ¥å®Œæˆã€‚åº”ç”¨å¼€å‘è€…å¯æ ¹æ®åº”ç”¨çš„éœ€æ±‚æ¥çµæ´»è®¾è®¡è‡ªå·±çš„å¯é æ€§æœºåˆ¶ã€‚

**UDP**æ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹**UDP**å¯¹åº”ç”¨å±‚äº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œåœ¨æ·»åŠ é¦–éƒ¨åå°±å‘ä¸‹äº¤ä»˜ç»™**IP**å±‚ï¼Œä¸€æ¬¡å‘é€ä¸€ä¸ªæŠ¥æ–‡ï¼Œæ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼›æ¥æ”¶æ–¹**UDP**å¯¹**IP**å±‚äº¤ä¸Šæ¥**UDP**æ•°æ®æŠ¥ï¼Œåœ¨å»é™¤é¦–éƒ¨åå°±åŸå°ä¸åŠ¨åœ°äº¤ä»˜ç»™ä¸Šå±‚åº”ç”¨è¿›ç¨‹ï¼Œä¸€æ¬¡äº¤ä»˜ä¸€ä¸ªå®Œæ•´çš„æŠ¥æ–‡ã€‚

å› æ­¤æŠ¥æ–‡ä¸å¯åˆ†å‰²ï¼Œæ˜¯**UDP**æ•°æ®æŠ¥å¤„ç†çš„æœ€å°å•ä½ã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åºå¿…é¡»é€‰æ‹©åˆé€‚å¤§å°çš„æŠ¥æ–‡ï¼Œè‹¥æŠ¥æ–‡å¤ªé•¿ï¼Œ**UDP**æŠŠå®ƒäº¤ç»™**IP**å±‚åï¼Œå¯èƒ½ä¼šå¯¼è‡´åˆ†ç‰‡ï¼›è‹¥æŠ¥æ–‡å¤ªçŸ­ï¼Œ**UDP**æŠŠå®ƒäº¤ç»™**IP**å±‚åï¼Œä¼šä½¿**IP**æ•°æ®æŠ¥çš„é¦–éƒ¨çš„ç›¸å¯¹é•¿åº¦å¤ªå¤§ï¼Œä¸¤è€…éƒ½ä¼šé™ä½**IP**å±‚çš„æ•ˆç‡ã€‚

 

UDPçš„æ ¡éªŒå’Œï¼ˆä¸Šè¯¾ä¹Ÿæ²¡è®²ï¼Œæˆ‘è‡ªå·±äº†è§£ä¸‹ï¼‰

åœ¨**UDP**æ•°æ®æŠ¥ä¹‹å‰å¢åŠ **12B**çš„ä¼ªé¦–éƒ¨ã€‚

ä½†UDPçš„æ ¡éªŒå’Œåˆ™æ£€æŸ¥***é¦–éƒ¨å’Œæ•°æ®***éƒ¨åˆ†ã€‚

Before the UDP datagram, add a pseudo header of 12 bytes.

However, the UDP checksum only checks the header and data sections.



### **6.5 THE INTERNET TRANSPORT PROTOCOLS: TCP**

### 6.5.1 Introduction to TCP

**TCP** (**Transmission Control Protocol**) was specifically designed to provide a reliable end-to-end byte stream over an unreliable internetwork.

****\*TCP Featuresï¼šConnection-oriented, duplex, reliable byte-stream service with flow control\*****

## 6.5.2 TCP æœåŠ¡æ¨¡å‹

TCP æœåŠ¡ç”±å‘é€ç«¯å’Œæ¥æ”¶ç«¯åˆ›å»ºä¸€ç§ç§°ä¸ºå¥—æ¥å­—ï¼ˆ socket ï¼‰çš„ç«¯ç‚¹æ¥è·å¾—ï¼Œæ­£å¦‚æˆ‘ä»¬ 6.1.3 èŠ‚ä¸­æ‰€è®¨è®ºçš„é‚£æ ·ã€‚æ¯ä¸ªå¥—æ¥å­—æœ‰ä¸€ä¸ªå¥—æ¥å­—ç¼–å·ï¼ˆåœ°å€ï¼‰ï¼Œè¯¥ç¼–å·ç”±ä¸»æœºçš„ IP å€ä»¥åŠä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„ **16 ä½æ•°å€¼**ç»„æˆçš„ã€‚è¿™ä¸ª 16 ä½æ•°å€¼ç§°ä¸ºç«¯å£ï¼ˆport ï¼‰ï¼Œç«¯å£æ˜¯ TCP TSAP åå­—ã€‚

åŒä¸€å°è®¡ç®—æœº**TCP**å’Œ**UDP**åˆ†åˆ«æ‹¥æœ‰è‡ªå·±çš„ç«¯å£å·ï¼Œå®ƒä»¬äº’ä¸å¹²æ‰°

Service Access Point.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/62cddbcb-76ff-4a9f-ad19-f8364a4fa687/1165ce84-add6-4133-8b78-ef6b5af58c2b/Untitled.png)

### 6.5.4 TCP æ®µçš„å¤´ Header Fieldï¼š20Bï¼ˆ5*4Bï¼‰

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/62cddbcb-76ff-4a9f-ad19-f8364a4fa687/51f6296c-666d-4a08-8f05-09ddba9bdbb0/Untitled.png)

TCPä¼ é€çš„data unit ç§°ä¸ºæŠ¥æ–‡æ®µ segmentã€‚TCPæŠ¥æ–‡æ®µæ—¢å¯ä»¥ç”¨æ¥è¿è½½æ•°æ®ï¼Œåˆå¯ä»¥ç”¨æ¥å»ºç«‹è¿æ¥ã€ é‡Šæ”¾è¿æ¥å’Œåº”ç­”ã€‚

ä¸€ä¸ªTCPæŠ¥æ–‡æ®µåˆ†ä¸ºé¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ï¼Œæ•´ä¸ªTCPæŠ¥æ–‡æ®µä½œä¸ºIPæ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œå¦‚å›¾5.6æ‰€ç¤ºã€‚å…¶é¦–éƒ¨çš„å‰20Bæ˜¯å›ºå®šçš„ã€‚TCPé¦–éƒ¨æœ€çŸ­ä¸º20B,åé¢æœ‰4Nå­—èŠ‚æ˜¯æ ¹æ®éœ€è¦è€Œå¢åŠ çš„é€‰é¡¹ï¼Œé•¿åº¦ä¸º4Bçš„æ•´æ•°å€ã€‚

![image-20240108150907202](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108150907202.png)

> 1ï¼‰ æºç«¯å£å’Œç›®çš„ç«¯å£ã€‚å„å 2Bã€‚ç«¯å£æ˜¯ä¼ è¾“å±‚ä¸åº”ç”¨å±‚çš„æœåŠ¡æ¥å£ï¼Œä¼ è¾“å±‚çš„å¤ç”¨å’Œåˆ†ç”¨åŠŸèƒ½éƒ½è¦é€šè¿‡ç«¯å£å®ç°ã€‚
>
> 2_åºå·ã€‚å 4B,èŒƒå›´ä¸º0ã€œ2^32- 1,å…±2^32ä¸ªåºå·ã€‚**tcp**æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼ˆå³TCPä¼ é€æ—¶æ˜¯é€ä¸ªå­—èŠ‚ä¼ é€çš„ï¼‰ï¼Œæ‰€ä»¥TCPè¿æ¥ä¼ é€çš„å­—èŠ‚æµä¸­çš„æ¯ä¸ªå­—èŠ‚éƒ½æŒ‰é¡ºåºç¼–å·ã€‚åºå·å­—æ®µçš„å€¼æŒ‡çš„æ˜¯æœ¬æŠ¥æ–‡æ®µæ‰€å‘é€çš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚
>
> ä¾‹å¦‚ï¼Œä¸€æŠ¥æ–‡æ®µçš„åºå·å­—æ®µå€¼æ˜¯301,è€Œæºå¸¦çš„æ•°æ®å…±æœ‰100B,è¡¨æ˜æœ¬æŠ¥æ–‡æ®µçš„æ•°æ®çš„æœ€å1ä¸ªå­—èŠ‚çš„åºå·æ˜¯400,å› æ­¤ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„æ•°æ®åºå·åº”ä»401å¼€å§‹ã€‚
>
> 3ï¼‰ ç¡®è®¤å·ackã€‚å 4B,æ˜¯æœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·ã€‚è‹¥ç¡®è®¤å·ä¸ºN, åˆ™è¡¨æ˜åˆ°åºå·N-1ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·±æ­£ç¡®æ”¶åˆ°ã€‚ ä¾‹å¦‚ï¼ŒBæ­£ç¡®æ”¶åˆ°äº† Aå‘é€è¿‡æ¥çš„ä¸€ä¸ªæŠ¥æ–‡æ®µï¼Œå…¶åºå·å­—æ®µæ˜¯501,è€Œæ•°æ®é•¿åº¦æ˜¯200B ï¼ˆåº å·501ã€œ700ï¼‰,è¿™è¡¨æ˜Bæ­£ç¡®æ”¶åˆ°äº† Aå‘é€çš„åˆ°åºå·700ä¸ºæ­¢çš„æ•°æ®ã€‚å› æ­¤BæœŸæœ›æ”¶åˆ°Açš„ä¸‹ä¸€ä¸ªæ•°æ®åºå·æ˜¯701,äºæ˜¯Båœ¨å‘é€ç»™Açš„ç¡®è®¤æŠ¥æ–‡æ®µä¸­æŠŠç¡®è®¤å·ç½®ä¸º701ã€‚
>
> 4)é¦–éƒ¨é•¿åº¦ï¼‰ã€‚å 4ä½ï¼Œè¿™é‡Œä¸æ˜¯IPæ•°æ®æŠ¥åˆ†ç‰‡çš„é‚£ä¸ªæ•°æ®åç§»ï¼Œè€Œæ˜¯è¡¨ç¤ºé¦–éƒ¨é•¿åº¦ï¼ˆé¦–éƒ¨ä¸­è¿˜æœ‰é•¿åº¦ä¸ç¡®å®šçš„é€‰é¡¹å­—æ®µï¼‰ï¼Œå®ƒæŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œã€‚â€œæ•°æ®åç§»â€çš„å•ä½æ˜¯32ä½ï¼ˆä»¥4Bä¸ºè®¡ç®—å•ä½ï¼‰ã€‚ç”±äº4ä½äºŒè¿›åˆ¶æ•°èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ä¸º15,å› æ­¤TCPé¦–éƒ¨çš„æœ€å¤§é•¿åº¦ä¸º60B
>
> **6ï¼‰** ç´§æ€¥ä½**URG**ã€‚å½“**URG= 1**æ—¶ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚å®ƒå‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼Œåº”å°½å¿«ä¼ é€ï¼ˆç›¸å½“äºé«˜ä¼˜å…ˆçº§çš„æ•°æ®ï¼‰ã€‚ä½†**URG**éœ€è¦å’Œé¦–éƒ¨ä¸­ç´§æ€¥æŒ‡é’ˆå­—æ®µé…åˆä½¿
>
> ç”¨ï¼Œå³æ•°æ®ä»ç¬¬ä¸€ä¸ªå­—èŠ‚åˆ°ç´§æ€¥æŒ‡é’ˆæ‰€æŒ‡å­—èŠ‚å°±æ˜¯ç´§æ€¥æ•°æ®ã€‚
>
> **7ï¼‰** ç¡®è®¤ä½**ACK**ã€‚ä»…å½“**ACK= 1**æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆã€‚å½“**ACK = 0**æ—¶ï¼Œç¡®è®¤å·æ— æ•ˆã€‚
>
> **TCP**è§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰ä¼ é€çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠ**ACK**ç½®**1**ã€‚
>
> **8ï¼‰** æ¨é€ä½**PSH ï¼ˆPushï¼‰o**æ¥æ”¶æ–¹**TCP**æ”¶åˆ°**PSH= 1**çš„æŠ¥æ–‡æ®µï¼Œå°±å°½å¿«åœ°äº¤ä»˜ç»™æ¥æ”¶åº”ç”¨è¿›ç¨‹,
>
> è€Œä¸å†ç­‰åˆ°æ•´ä¸ªç¼“å­˜éƒ½å¡«æ»¡äº†åå†å‘ä¸Šäº¤ä»˜ã€‚
>
> **9ï¼‰** å¤ä½ä½**RST ï¼ˆResetï¼‰o**å½“**RST=1**æ—¶ï¼Œè¡¨æ˜**TCP**è¿æ¥ä¸­å‡ºç°ä¸¥é‡å·®é”™ï¼ˆå¦‚ä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› ï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿è¾“è¿æ¥ã€‚
>
> **10ï¼‰** åŒæ­¥ä½**SYN**ã€‚å½“**SYN= 1**æ—¶è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª**è¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥å—**æŠ¥æ–‡ã€‚
>
> å½“**SYN=1, ACK = 0**æ—¶ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡ï¼Œå¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™åº”åœ¨å“åº”æŠ¥æ–‡ä¸­ä½¿ç”¨**SYN=1, ACK=1**
>
> **11ï¼‰** ç»ˆæ­¢ä½**FIN ï¼ˆFinishï¼‰o**ç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚å½“**FIN= 1**æ—¶ï¼Œè¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿è¾“è¿æ¥ã€‚
>
> **12ï¼‰** çª—å£ã€‚å **2B,\**èŒƒå›´ä¸º\**0ã€œ2^16**ä¸€**1**ã€‚å®ƒæŒ‡å‡ºç°åœ¨å…è®¸å¯¹æ–¹å‘é€çš„æ•°æ®é‡ï¼Œæ¥æ”¶æ–¹çš„æ•°æ®ç¼“å­˜ç©ºé—´æ˜¯æœ‰é™çš„ï¼Œå› æ­¤ç”¨çª—å£å€¼ä½œä¸ºæ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ã€‚
>
> ä¾‹å¦‚ï¼Œè®¾ç¡®è®¤å·æ˜¯**701,\**çª—å£å­—æ®µæ˜¯\**1000**ã€‚è¿™è¡¨æ˜ï¼Œä»**701**å·ç®—èµ·ï¼Œå‘é€æ­¤æŠ¥æ–‡æ®µçš„ä¸€æ–¹è¿˜æœ‰æ¥æ”¶**1000**å­—èŠ‚æ•°æ®ï¼ˆå­—èŠ‚åºå·ä¸º**701ã€œ1700ï¼‰**çš„æ¥æ”¶ç¼“å­˜ç©ºé—´ã€‚
>
> **13ï¼‰** æ ¡éªŒå’Œã€‚å **2Bo**æ ¡éªŒå’Œå­—æ®µæ£€éªŒçš„èŒƒå›´åŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ã€‚åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œå’Œ**UDP**ä¸€æ ·ï¼Œè¦åœ¨**TCP**æŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š**12B**çš„ä¼ªé¦–éƒ¨ï¼ˆåªéœ€å°†**UDP**ä¼ªé¦–éƒ¨çš„åè®®å­—æ®µçš„**17**æ”¹æˆ**6, UDP**é•¿åº¦å­—æ®µæ”¹æˆ**TCP**é•¿åº¦ï¼Œå…¶ä»–çš„å’Œ**UDP** ä¸€æ ·ï¼‰ã€‚
>
> **14ï¼‰** ç´§æ€¥æŒ‡é’ˆã€‚å **2B**ã€‚ç´§æ€¥æŒ‡é’ˆä»…åœ¨**URG = 1**æ—¶æ‰æœ‰æ„ä¹‰ï¼Œå®ƒæŒ‡å‡ºåœ¨æœ¬æŠ¥æ–‡æ®µä¸­ç´§æ€¥æ•°æ®å…±æœ‰å¤šå°‘å­—èŠ‚ï¼ˆç´§æ€¥æ•°æ®åœ¨æŠ¥æ–‡æ®µæ•°æ®çš„æœ€å‰é¢ï¼‰ã€‚
>
> 15ï¼‰ å¯é€‰é¡¹åªè§„å®šäº†ä¸€ç§ MSSï¼ˆmaxinum segment sizeï¼‰,TCPæŠ¥æ–‡æ®µä¸­çš„æ•°æ®å­—æ®µçš„æœ€å¤§é•¿åº¦ã€‚

### timestep

timestep is a option in the TCP header file. the format is :

```scss
kind(1 å­—èŠ‚) + length(1 å­—èŠ‚) + info(8 ä¸ªå­—èŠ‚)
```

å…¶ä¸­ kind = 8ï¼Œ length = 10ï¼Œ info æœ‰ä¸¤éƒ¨åˆ†æ„æˆ: **timestamp**å’Œ**timestamp echo**ï¼Œå„å  4 ä¸ªå­—èŠ‚ã€‚

é‚£ä¹ˆè¿™äº›å­—æ®µéƒ½æ˜¯å¹²å˜›çš„å‘¢ï¼Ÿå®ƒä»¬ç”¨æ¥è§£å†³é‚£äº›é—®é¢˜ï¼Ÿ

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä¸€ä¸€æ¢³ç†ï¼ŒTCP çš„æ—¶é—´æˆ³ä¸»è¦è§£å†³ä¸¤å¤§é—®é¢˜:

- è®¡ç®—å¾€è¿”æ—¶å»¶ RTT(Round-Trip Time)
- é˜²æ­¢åºåˆ—å·çš„å›ç»•é—®é¢˜

### **è®¡ç®—å¾€è¿”æ—¶å»¶ RTT**

åœ¨æ²¡æœ‰æ—¶é—´æˆ³çš„æ—¶å€™ï¼Œè®¡ç®— RTT ä¼šé‡åˆ°çš„é—®é¢˜å¦‚ä¸‹å›¾æ‰€ç¤º:

 

å¦‚æœä»¥ç¬¬ä¸€æ¬¡å‘åŒ…ä¸ºå¼€å§‹æ—¶é—´çš„è¯ï¼Œå°±ä¼šå‡ºç°å·¦å›¾çš„é—®é¢˜ï¼ŒRTT æ˜æ˜¾åå¤§ï¼Œå¼€å§‹æ—¶é—´åº”è¯¥é‡‡ç”¨ç¬¬äºŒæ¬¡çš„ï¼›

å¦‚æœä»¥ç¬¬äºŒæ¬¡å‘åŒ…ä¸ºå¼€å§‹æ—¶é—´çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å³å›¾çš„é—®é¢˜ï¼ŒRTT æ˜æ˜¾åå°ï¼Œå¼€å§‹æ—¶é—´åº”è¯¥é‡‡ç”¨ç¬¬ä¸€æ¬¡å‘åŒ…çš„ã€‚

å®é™…ä¸Šæ— è®ºå¼€å§‹æ—¶é—´ä»¥ç¬¬ä¸€æ¬¡å‘åŒ…è¿˜æ˜¯ç¬¬äºŒæ¬¡å‘åŒ…ä¸ºå‡†ï¼Œéƒ½æ˜¯ä¸å‡†ç¡®çš„ã€‚

é‚£è¿™ä¸ªæ—¶å€™å¼•å…¥æ—¶é—´æˆ³å°±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚

æ¯”å¦‚ç°åœ¨ a å‘ b å‘é€ä¸€ä¸ªæŠ¥æ–‡ s1ï¼Œb å‘ a å›å¤ä¸€ä¸ªå« ACK çš„æŠ¥æ–‡ s2 é‚£ä¹ˆï¼š

- **step 1:** a å‘ b å‘é€çš„æ—¶å€™ï¼Œ`timestamp` ä¸­å­˜æ”¾çš„å†…å®¹å°±æ˜¯ a ä¸»æœºå‘é€æ—¶çš„å†…æ ¸æ—¶åˆ» `ta1`ã€‚
- **step 2:** b å‘ a å›å¤ s2 æŠ¥æ–‡çš„æ—¶å€™ï¼Œ`timestamp` ä¸­å­˜æ”¾çš„æ˜¯ b ä¸»æœºçš„æ—¶åˆ» `tb`, `timestamp echo`å­—æ®µä¸ºä» s1 æŠ¥æ–‡ä¸­è§£æå‡ºæ¥çš„ ta1ã€‚
- **step 3:** a æ”¶åˆ° b çš„ s2 æŠ¥æ–‡ä¹‹åï¼Œæ­¤æ—¶ a ä¸»æœºçš„å†…æ ¸æ—¶åˆ»æ˜¯ ta2, è€Œåœ¨ s2 æŠ¥æ–‡ä¸­çš„ timestamp echo é€‰é¡¹ä¸­å¯ä»¥å¾—åˆ° `ta1`, ä¹Ÿå°±æ˜¯ s2 å¯¹åº”çš„æŠ¥æ–‡æœ€åˆçš„å‘é€æ—¶åˆ»ã€‚ç„¶åç›´æ¥é‡‡ç”¨ ta2 - ta1 å°±å¾—åˆ°äº† RTT çš„å€¼ã€‚

## 6.5.5 TCP è¿æ¥å»ºç«‹ establishment of a **TCP** connection

The establishment of a **TCP** connection follows the client/server model. The application process that initiates the connection is called the client, while the application process that passively waits for the connection to be established is called the server. ****

normal

![image-20240108160804297](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108160804297.png)

ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šä¸èƒ½æºå¸¦æ•°æ® æ¶ˆè€—ä¸€ä¸ªåºå·

ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šä¸èƒ½æºå¸¦æ•°æ® æ¶ˆè€—ä¸€ä¸ªåºå·

ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šå¯ä»¥æºå¸¦æ•°æ® ä¸æ¶ˆè€—åºå·äº†

## 6.5.6 TCP è¿æ¥é‡Šæ”¾

> è™½ç„¶ TCP è¿æ¥æ˜¯å…¨åŒå·¥çš„ï¼Œä½†æ˜¯ï¼Œä¸ºäº†ç†è§£ TCP è¿æ¥æ˜¯å¦‚ä½•é‡Šæ”¾çš„ï¼Œæœ€å¥½å°† TCPæ¥çœ‹æˆä¸€å¯¹å•å·¥è¿æ¥ã€‚æ¯ä¸ªå•å·¥è¿æ¥çš„é‡Šæ”¾å½¼æ­¤ç‹¬ç«‹ã€‚
>
> ä¸ºäº†é‡Šæ”¾ä¸€ä¸ªè¿æ¥ï¼Œä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥å‘é€ä¸€ä¸ªè®¾ç½®äº† FIN æ ‡å¿—ä½çš„ TCP æ®µï¼Œè¿™è¡¨ç¤ºå®ƒå·±ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ã€‚
>
> å½“ FIN æ®µè¢«å¦ä¸€æ–¹ç¡®è®¤åï¼Œè¿™ä¸ªæ–¹å‘ä¸Šçš„è¿æ¥å°±è¢«å…³é—­ï¼Œä¸å†å‘é€ä»»ä½•æ•°æ®ã€‚ç„¶è€Œï¼Œå¦ä¸€ä¸ªæ–¹å‘ä¸Šæˆ–è®¸è¿˜åœ¨ç»§ç»­ç€æ— é™çš„æ•°æ®æµã€‚å½“ä¸¤ä¸ªæ–¹å‘éƒ½å…³é—­åï¼Œè¿æ¥æ‰ç®—è¢«å½»åº•é‡Šæ”¾ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé‡Š æ”¾ä¸€ä¸ªè¿æ¥éœ€è¦ TCP æ®µï¼šæ¯ä¸ªæ–¹å‘ä¸Šä¸€ä¸ª FIN å’Œä¸€ä¸ª ACKã€‚ç„¶è€Œï¼Œç¬¬ä¸€ä¸ª ACK å’Œç¬¬äºŒä¸ª FIN æœ‰å¯èƒ½è¢«ç»„åˆåœ¨åŒä¸€ä¸ªæ®µä¸­ï¼Œä»è€Œå°†æ‰€éœ€æ®µæ€»æ•°é™ä½åˆ°3ä¸ªã€‚ 
>
> æ—¶é—´ç­‰å¾…è®¡æ—¶å™¨ï¼šç­‰å¾…2MSL ä¸¤ä¸ªæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½
>
> æ­£å¦‚åœ¨ç”µè¯é€šè¯è¿‡ç¨‹ä¸­ï¼ŒåŒæ–¹è¯´å®Œå†è§ä¹‹ååŒæ—¶æŒ‚æ–­ç”µè¯ä¸€æ ·ï¼Œä¸€ä¸ª TCP è¿æ¥çš„ä¸¤ç«¯ä¹Ÿå¯èƒ½ä¼šåŒæ—¶å‘é€ FIN æ®µã€‚è¿™ä¸¤ä¸ªæ®µæŒ‰å¸¸è§„çš„æ–¹æ³•è¢«å•ç‹¬ç¡®è®¤ï¼Œç„¶åå…³é—­è¿æ¥ã€‚å®é™…ä¸Šï¼Œä¸¤å°ä¸»æœºå¯ä»¥å…ˆåé‡Šæ”¾è¿æ¥ï¼Œæˆ–è€…åŒæ—¶é‡Šæ”¾è¿æ¥ï¼Œè¿™ä¸¤è€…ä¹‹é—´å¹¶æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚

 ![image-20240108161147838](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108161147838.png)



## 6.5.8 TCP æ»‘åŠ¨çª—å£ sliding window è¿™æ˜¯flow control 

window management in TCP decouples the issues of acknowledgement of the correct receipt of segments and receiver buffer allocation.

çª—å£è¿‡å¤§ ä¼šç”±äºä¼ é€çš„æ•°æ®è¿‡å¤šè®©è·¯ç”±å™¨å˜çš„æ‹¥æŒ¤ 

çª—å£è¿‡å°ACKä¼šå¾ˆå¤š

## **6.5.9 TCP Timer Management**

**Timeout**

the timer goes off before the acknowledgement comes in, the segment is retransmitted.

**RTO** (**Retransmission TimeOut**).

SRTT C Smoothed Round-Trip Time ï¼Œå¹³æ»‘çš„å¾€è¿”æ—¶é—´ã€‰ï¼Œå®ƒä»£è¡¨åˆ°è¾¾æ¥æ”¶æ–¹å¾€è¿”æ—¶é—´çš„å½“å‰æœ€ä½³ä¼°è®¡å€¼ã€‚

SRTT = Î±SRTT + (1-Î±)SRTT 

æ”¹è¿›ï¼šè·Ÿè¸ªå¦ä¸€ä¸ªå¹³æ»‘å˜é‡ï¼Œ RTTVAR å¾€è¿”æ—¶é—´å˜åŒ–ï¼Œ Round-Trip Time VARiation ï¼‰ï¼Œå³æ›´æ–°ä¸ºä¸‹åˆ—å…¬å¼ï¼š

RTTVAR ï¼$\beta$ RTTVAR + (1- $\beta$ï¼‰|SRTT- R |

RTO = SRTT + 4 x RTTV AR

è¿™å°±åƒä»¥å‰çš„ EWMAï¼Œå…¸å‹åœ°ï¼Œ~ï¼ 3 *I* 4. å› æ­¤ï¼Œé‡ä¼ è¶…æ—¶å€¼ï¼Œ RTO

RTO = SRTT + 4 x RTTV AR 

### 6.5.10 TCP Congestion Controlï¼šå•ä½æ˜¯Bã€‚å¢åŠ å’Œå‡å°‘çš„ä¸œè¥¿æ˜¯MSS

å‘é€æ–¹åœ¨ç¡®å®šå‘é€æŠ¥æ–‡æ®µçš„é€Ÿç‡æ—¶ï¼Œæ—¢è¦æ ¹æ®æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›ï¼Œåˆè¦ä»å…¨å±€è€ƒè™‘ä¸è¦ä½¿ç½‘ç»œå‘ç”Ÿæ‹¥å¡ã€‚å› æ­¤ï¼ŒTCPåè®®è¦æ±‚**å‘é€æ–¹**ç»´æŠ¤ä»¥ä¸‹ä¸¤ä¸ªçª—å£ï¼š 1ï¼‰ æ¥æ”¶çª—å£ rwnd, **Receiver Window** æ¥æ”¶æ–¹æ ¹æ®ç›®å‰æ¥æ”¶ç¼“å­˜å¤§å°æ‰€è®¸è¯ºçš„æœ€æ–°çª—å£å€¼ï¼Œåæ˜ æ¥æ”¶æ–¹çš„å®¹é‡ã€‚ ç”±æ¥æ”¶æ–¹æ ¹æ®å…¶æ”¾åœ¨**TCPæŠ¥æ–‡çš„é¦–éƒ¨çš„çª—å£å­—æ®µ**é€šçŸ¥å‘é€æ–¹ã€‚ 2ï¼‰ æ‹¥å¡çª—å£ cwnd, **congestion** **Window**å‘é€æ–¹æ ¹æ®è‡ªå·±ä¼°ç®—çš„ç½‘ç»œæ‹¥å¡ç¨‹åº¦è€Œè®¾ç½®çš„çª—å£å€¼ï¼Œåæ˜ ç½‘ç»œçš„å½“å‰å®¹é‡ã€‚åªè¦ç½‘ç»œæœªå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å†å¢å¤§ä¸€äº›ï¼Œä»¥ä¾¿æŠŠæ›´å¤šçš„åˆ†ç»„å‘é€å‡ºå»ã€‚ä½† åªè¦ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å‡å°ä¸€äº›ï¼Œä»¥å‡å°‘æ³¨å…¥ç½‘ç»œçš„åˆ†ç»„æ•°ã€‚ å‘é€çª—å£çš„ä¸Šé™å€¼åº”å–æ¥æ”¶çª—å£ rwndå’Œæ‹¥å¡çª—å£ cwndä¸­è¾ƒå°çš„ä¸€ä¸ªï¼Œ

å‘é€çª—å£çš„ä¸Šé™å€¼=min[rwnd, cwnd]

 æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…   two phases    Slow Start   *Congestion Avoidance*

**Connection just established, set cwnd = 1 MSS**

æ…¢å¼€å§‹ï¼šcwnd ä¸€å¼€å§‹æ˜¯1 åæ¥æŒ‡æ•°å¢åŠ ã€‚  ***ssthresh***

æ‹¥å¡é¿å…ï¼šæ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶å»¶RTTå°±æŠŠå‘é€æ–¹çš„æ‹¥å¡çª—å£ cwndåŠ 1

 **Increase window size by 1 MSS for each new ACK received**

ç½‘ç»œæ‹¥å¡çš„å¤„ç†ï¼šæ— è®ºåœ¨æ…¢å¼€å§‹é˜¶æ®µè¿˜æ˜¯åœ¨æ‹¥å¡é¿å…é˜¶æ®µï¼Œåªè¦å‘é€æ–¹åˆ¤æ–­ç½‘ç»œå‡ºç°æ‹¥å¡ï¼ˆæœªæŒ‰æ—¶æ”¶åˆ°ç¡®è®¤ï¼‰ï¼Œ **å°±è¦æŠŠæ…¢å¼€å§‹é—¨é™ssthreshè®¾ç½®ä¸ºå‡ºç°æ‹¥å¡æ—¶çš„å‘é€æ–¹çš„cwndå€¼çš„ä¸€åŠï¼ˆä½†ä¸èƒ½å°äº2ï¼‰**ã€‚ç„¶åæŠŠæ‹¥å¡çª—å£ cwndé‡æ–°è®¾ç½®ä¸º1,æ‰§è¡Œæ…¢å¼€å§‹ç®—æ³•ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯è¿…é€Ÿå‡å°‘ä¸»æœºå‘é€åˆ°ç½‘ç»œä¸­çš„åˆ†ç»„æ•°ï¼Œä½¿å¾—å‘ç”Ÿæ‹¥å¡çš„è·¯ç”±å™¨æœ‰è¶³å¤Ÿæ—¶é—´æŠŠé˜Ÿåˆ—ä¸­ç§¯å‹çš„åˆ†ç»„å¤„ç†å®Œã€‚

è¿™æ˜¯TCP Renoçš„åšæ³•ã€‚Tahoeæ²¡æœ‰3 duplicated ACKs

***å¿«é‡ä¼ å’Œå¿«æ¢å¤ ***     Fast Retransmit        *Fast Recovery*

å¿«é‡ä¼ ï¼šå¿«é‡ä¼ æŠ€æœ¯ä½¿ç”¨äº†å†—ä½™ACKæ¥æ£€æµ‹ä¸¢åŒ…çš„å‘ç”Ÿã€‚åŒæ ·ï¼Œå†—ä½™ACKä¹Ÿç”¨äºç½‘ç»œæ‹¥å¡çš„æ£€æµ‹ã€‚

å½“å‘é€æ–¹è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ACKæŠ¥æ–‡æ—¶ï¼Œç›´æ¥é‡ä¼ å¯¹æ–¹å°šæœªæ”¶åˆ°çš„æŠ¥æ–‡æ®µï¼Œè€Œä¸å¿…ç­‰å¾… é‚£ä¸ªæŠ¥æ–‡æ®µè®¾ç½®çš„é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶ã€‚ï¼ˆå…ˆï¼‰

å¿«æ¢å¤ï¼š

å½“å‘é€æ–¹è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤çš„ACKæŠ¥æ–‡æ—¶ï¼Œå°±è¦æŠŠæ…¢å¼€å§‹é—¨é™ssthreshè®¾ç½®ä¸ºå‡ºç°æ‹¥å¡æ—¶çš„å‘é€æ–¹çš„cwndå€¼çš„ä¸€åŠã€‚ cwndä¹Ÿä¸ºè¯¥å€¼ã€‚



for experiment

ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†AQM

1998å¹´æå‡ºäº†ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç†AQM (Active Queue Management)ã€‚

æ‰€è°“â€œä¸»åŠ¨â€å°±æ˜¯ä¸è¦ç­‰åˆ°è·¯ç”±å™¨çš„é˜Ÿåˆ—é•¿åº¦å·²ç»è¾¾åˆ°æœ€å¤§å€¼æ—¶æ‰ä¸å¾—ä¸ä¸¢å¼ƒåé¢åˆ°è¾¾çš„åˆ†ç»„ã€‚è¿™æ ·å°±å¤ªè¢«åŠ¨äº†ã€‚åº”å½“åœ¨é˜Ÿåˆ—é•¿åº¦è¾¾åˆ°æŸä¸ªå€¼å¾—è­¦æƒ•çš„ æ•°å€¼æ—¶ï¼ˆå³å½“ç½‘ç»œæ‹¥å¡æœ‰äº†æŸäº›æ‹¥å¡å¾å…†æ—¶ï¼‰ï¼Œå°±ä¸»åŠ¨ä¸¢å¼ƒåˆ°è¾¾çš„åˆ†ç»„ã€‚æé†’å‘é€æ–¹æ”¾æ…¢å‘é€é€Ÿç‡ï¼Œ ä¼šæœ‰å¯èƒ½å‡è½»ç½‘ç»œæ‹¥å¡ç”šè‡³ä¸å‡ºç°æ‹¥å¡ã€‚

AQM å¯ä»¥æœ‰ä¸åŒå®ç°æ–¹æ³•ï¼Œå…¶ä¸­æ›¾æµè¡Œå¤šå¹´çš„å°±æ˜¯éšæœºæ—©æœŸæ£€æµ‹RED (Random Early Detection)ã€‚

# è‡ªæ²»ç³»ç»Ÿ Autonomous System

### Two types of internet router protocols

Interior gateway protocols

exterior gateway protocols

RIP  Routing Information Protocol  

interior gateway protocols

 OSFP

# Application Layer

## 7.1 DNSâ€”â€”Domain Name System

DNSç³»ç»Ÿé‡‡ç”¨å®¢æˆ·/æœåŠ¡å™¨æ¨¡å‹ï¼Œå…¶åè®®è¿è¡Œåœ¨UDPä¹‹ä¸Šï¼Œä½¿ç”¨53å·ç«¯å£ã€‚

*Caches name server answers for better performances*

ä»æ¦‚å¿µä¸Šå¯å°†DNSåˆ†ä¸º3éƒ¨åˆ†ï¼š **Hierarchy**  *DNS Name Space*ã€åŸŸåæœåŠ¡å™¨å’Œè§£æå™¨ã€‚

ï¼ˆTop Level Domain, TLD (1)nTLD  (2)gTLD  (3) arpa

![image-20240108221936697](è®¡ç½‘å¤ä¹ çŸ¥è¯†ç‚¹å¤§çº².assets/image-20240108221936697.png)

### 7.1.2 *Domain Resource Records*

Domain name 

Time to live

Class   å¯¹äº Internet ä¿¡æ¯ï¼Œå®ƒæ€»æ˜¯ IN

Type 

Value 

### 7.1.3 åŸŸåæœåŠ¡å™¨ domain name server

**holds data of the name space**

**Resolution****: finding the IP address for a given hostname**ï¼š

â€¢ *Computer requests local name server to resolve.*

â€¢ *Local name server asks the root name server.*

â€¢ *Root returns the name server for a lower zone.*

â€¢ *Continue down zones until a name server can answer.*

## 7.2  ç”µå­é‚®ä»¶**Simple Mail Transfer Protocol** **SMTP **

***Works on TCP***

*A set of communication rules between*  **Mail Transfer Agents (MTA)**

- **User Agent (UA)***: Outlook, Mozillaâ€¦*ï¼Œä¸€ä¸ªè½¯ä»¶

  *the interface of a typical user agent**

- *Message Transfer (between MTAs)*

## 7.3  ä¸‡ç»´ç½‘ï¼ˆWorld Wide WebÂ· ï¼‰

å®ƒæ˜¯ä¸€ä¸ªä½“ç³»ç»“æ„æ¡†æ¶

ä¸‡ç»´ç½‘ï¼ˆWorldWideWeb, WWWï¼‰æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€è”æœºå¼çš„ä¿¡æ¯å­˜å‚¨ç©ºé—´ï¼Œåœ¨è¿™ä¸ªç©ºé—´ä¸­ï¼š ä¸€æ ·æœ‰ç”¨çš„äº‹ç‰©ç§°ä¸ºä¸€æ ·â€œèµ„æºâ€ï¼Œå¹¶ç”±ä¸€ä¸ªå…¨åŸŸâ€œç»Ÿä¸€èµ„æºå®šä½ç¬¦â€ï¼ˆURL  Uniform Resource Locators & Hyperlinks ï¼‰æ ‡è¯†ã€‚è¿™äº›èµ„æºé€šè¿‡è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰ä¼ é€ç»™ä½¿ç”¨è€…ï¼Œè€Œåè€…é€šè¿‡å•å‡»é“¾æ¥æ¥è·å–èµ„æºã€‚ 

*Server/Client Steps (web browsing)*

ä¸‡ç»´ç½‘ä»¥å®¢æˆ·/æœåŠ¡å™¨æ–¹å¼å·¥ä½œã€‚æµè§ˆå™¨æ˜¯åœ¨ç”¨æˆ·ä¸»æœºä¸Šçš„ä¸‡ç»´ç½‘å®¢æˆ·ç¨‹åºï¼Œè€Œä¸‡ç»´ç½‘æ–‡æ¡£æ‰€é©»ç•™çš„ä¸»æœºåˆ™è¿è¡ŒæœåŠ¡å™¨ç¨‹åºï¼Œè¿™å°ä¸»æœºç§°ä¸ºä¸‡ç»´ç½‘æœåŠ¡å™¨ã€‚å®¢æˆ·ç¨‹åºå‘æœåŠ¡å™¨ç¨‹åºå‘å‡ºè¯·æ±‚ï¼Œ 

æœåŠ¡å™¨ç¨‹åºå‘å®¢æˆ·ç¨‹åºé€å›å®¢æˆ·æ‰€è¦çš„ä¸‡ç»´ç½‘æ–‡æ¡£ã€‚å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š

1ï¼‰ Webç”¨æˆ·ä½¿ç”¨æµè§ˆå™¨ï¼ˆæŒ‡å®šURLï¼‰ä¸WebæœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå¹¶å‘é€æµè§ˆè¯·æ±‚ã€‚

Våè®®ã€‰://<ä¸»æœº >:<ç«¯å£> /<è·¯å¾„ï¼ã€‚

2ï¼‰ WebæœåŠ¡å™¨æŠŠURLè½¬æ¢ä¸ºæ–‡ä»¶è·¯å¾„ï¼Œå¹¶è¿”å›ä¿¡æ¯ç»™Webæµè§ˆå™¨ã€‚

3ï¼‰ é€šä¿¡å®Œæˆï¼Œå…³é—­è¿æ¥ã€‚ 

ä¸‡ç»´ç½‘æ˜¯æ— æ•°ä¸ªç½‘ç»œç«™ç‚¹å’Œç½‘é¡µçš„é›†åˆï¼Œå®ƒä»¬åœ¨ä¸€èµ·æ„æˆäº†å› ç‰¹ç½‘æœ€ä¸»è¦çš„éƒ¨åˆ†ï¼ˆå› ç‰¹ç½‘ä¹ŸåŒ…æ‹¬ç”µå­é‚®ä»¶ã€Usenetå’Œæ–°é—»ç»„ï¼‰ã€‚

è¶…æ–‡æœ¬ä¼ è¾“åè®® ï¼ˆ HTTP ï¼‰ ï¼Œå®ƒè§„å®šäº†åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„è¯·æ±‚å’Œå“åº”çš„æ ¼å¼ä¸è§„åˆ™ï¼Œæ˜¯ä¸‡ç»´ç½‘ä¸Šèƒ½å¤Ÿå¯é åœ°äº¤æ¢æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–‡æœ¬ã€å£°éŸ³ã€å›¾åƒç­‰å„ç§å¤šåª’ä½“æ–‡ä»¶ï¼‰çš„é‡è¦åŸºç¡€ã€‚

HTTPï¼š **TCP è¿æ¥ï¼ï¼**

Cookieçš„å·¥ä½œåŸç†ï¼šå½“ç”¨æˆ·æµè§ˆæŸä¸ªä½¿ç”¨Cookieçš„ç½‘ç«™æ—¶ï¼Œè¯¥ç½‘ç«™æœåŠ¡å™¨å°±ä¸ºç”¨æˆ·äº§ç”Ÿ

> ä¸€ä¸ªå”¯ä¸€çš„è¯†åˆ«ç ï¼Œå¦‚â€œ123456â€ï¼Œæ¥ç€åœ¨ç»™ç”¨æˆ·çš„å“åº”æŠ¥æ–‡ä¸­æ·»åŠ ä¸€ä¸ªSet-cookieçš„é¦–éƒ¨è¡Œâ€œSetcookie: 123456"oç”¨æˆ·æ”¶åˆ°å“åº”åï¼Œå°±åœ¨å®ƒç®¡ç†çš„ç‰¹å®šCookieæ–‡ä»¶ä¸­æ·»åŠ è¿™ä¸ªæœåŠ¡å™¨çš„ä¸»æœºåå’ŒCookieè¯†åˆ«ç ï¼Œå½“ç”¨æˆ·ç»§ç»­æµè§ˆè¿™ä¸ªç½‘ç«™æ—¶ï¼Œä¼šå–å‡ºè¿™ä¸ªç½‘ç«™çš„è¯†åˆ«ç ï¼Œå¹¶æ”¾å…¥è¯·æ±‚æŠ¥æ–‡çš„Cookieé¦–éƒ¨è¡Œâ€œCookie: 123456â€ã€‚æœåŠ¡å™¨æ ¹æ®è¯·æ±‚æŠ¥æ–‡ä¸­çš„Cookieè¯†åˆ«ç å°±èƒ½ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°è¯¥ç”¨æˆ·çš„æ´»åŠ¨è®°å½•ï¼Œè¿›è€Œæ‰§è¡Œä¸€äº›ä¸ªæ€§åŒ–çš„å·¥ä½œï¼Œå¦‚æ ¹æ®ç”¨æˆ·çš„å†å²æµè§ˆè®°å½•å‘å…¶æ¨èæ–°äº§å“ç­‰ã€‚



â€¢ *Encoding of audio and video*

â€¢ *Streaming stored media*

â€¢ *Streaming live media*

â€¢ *Real-time conferencing*



â€¢ *Addressing: DNS, DHCP*

â€¢ *Web: URL, HTTP*

â€¢ *Streaming: RTP, RTSP*

â€¢ *File transfer: FTP*

â€¢ *Routing: BGP, OSPF, RIP*

â€¢ *Network Management: SNMP*

â€¢ *Email: SMTP, IMAP, POP*

â€¢ *Conferencing: H.323, SIP*

Addressing:

1. **DNS (Domain Name System)**:
   - **æ„ä¹‰**: å°†åŸŸåè½¬æ¢ä¸ºIPåœ°å€ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè®¿é—®ä½¿ç”¨äººç±»å¯è¯»åç§°çš„ç½‘ç«™ã€‚
   - **ä¼ è¾“å±‚**: ä¸»è¦ä½¿ç”¨UDPï¼Œä½†åœ¨å“åº”æ•°æ®è¾ƒå¤§æˆ–éœ€è¦å¯é æ€§æ—¶ä¼šä½¿ç”¨TCPã€‚
2. **DHCP (Dynamic Host Configuration Protocol)**:
   - **æ„ä¹‰**: è‡ªåŠ¨åˆ†é…IPåœ°å€ç»™ç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œä»¥åŠé…ç½®å…¶ä»–ç½‘ç»œä¿¡æ¯ï¼Œå¦‚å­ç½‘æ©ç å’Œé»˜è®¤ç½‘å…³ã€‚
   - **ä¼ è¾“å±‚**: ä¸»è¦ä½¿ç”¨UDPã€‚

Web:

1. **URL (Uniform Resource Locator)**:
   - **æ„ä¹‰**: ç½‘ç»œèµ„æºçš„åœ°å€ï¼Œç”¨äºå®šä½äº’è”ç½‘ä¸Šçš„èµ„æºï¼Œå¦‚ç½‘é¡µã€‚
   - **ä¼ è¾“å±‚**: ä¾èµ–äºæ‰€ä½¿ç”¨çš„åè®®ï¼Œé€šå¸¸æ˜¯HTTPæˆ–HTTPSï¼Œåè€…é€šè¿‡TCPä¼ è¾“ã€‚
2. **HTTP (Hypertext Transfer Protocol)**:
   - **æ„ä¹‰**: ç”¨äºåœ¨äº’è”ç½‘ä¸Šä¼ è¾“ç½‘é¡µçš„åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚

Streaming:

1. **RTP (Real-time Transport Protocol)**:
   - **æ„ä¹‰**: ç”¨äºä¼ è¾“å®æ—¶éŸ³é¢‘å’Œè§†é¢‘æ•°æ®ã€‚
   - **ä¼ è¾“å±‚**: é€šå¸¸ä½¿ç”¨UDPï¼Œå› ä¸ºå®ƒéœ€è¦å¿«é€Ÿä¼ è¾“ä¸”å¯ä»¥å®¹å¿ä¸€å®šçš„ä¸¢å¤±ã€‚
2. **RTSP (Real Time Streaming Protocol)**:
   - **æ„ä¹‰**: æ§åˆ¶æµåª’ä½“æœåŠ¡å™¨ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä¸ä¸‹è½½æ•´ä¸ªè§†é¢‘çš„æƒ…å†µä¸‹è¿›è¡Œæ’­æ”¾ã€æš‚åœç­‰æ“ä½œã€‚
   - **ä¼ è¾“å±‚**: é€šå¸¸ä½¿ç”¨TCPã€‚

File transfer:

1. FTP (File Transfer Protocol):
   - **æ„ä¹‰**: ç”¨äºåœ¨ç½‘ç»œä¸Šçš„è®¡ç®—æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚

Routing:

1. **BGP (Border Gateway Protocol)**:
   - **æ„ä¹‰**: ç”¨äºè·¯ç”±å’Œä¼ è¾¾ç½‘é—´å¯è¾¾æ€§ä¿¡æ¯çš„åè®®ï¼Œæ˜¯äº’è”ç½‘ä¸Šä¸»è¦çš„è·¯ç”±åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚
2. **OSPF (Open Shortest Path First)**:
   - **æ„ä¹‰**: ä¸€ç§å†…éƒ¨ç½‘å…³åè®®ï¼Œç”¨äºåœ¨å•ä¸ªè‡ªæ²»ç³»ç»Ÿå†…éƒ¨è¿›è¡Œè·¯ç”±é€‰æ‹©ã€‚
   - **ä¼ è¾“å±‚**: ç›´æ¥åœ¨IPä¹‹ä¸Šï¼Œä¸ä½¿ç”¨TCPæˆ–UDPã€‚
3. **RIP (Routing Information Protocol)**:
   - **æ„ä¹‰**: ä¸€ç§è¾ƒè€ä¸”ç®€å•çš„å†…éƒ¨ç½‘å…³è·¯ç”±åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä¸»è¦ä½¿ç”¨UDPã€‚

Network Management:

1. SNMP (Simple Network Management Protocol):åº”ç”¨å±‚
   - **æ„ä¹‰**: ç”¨äºç½‘ç»œç®¡ç†çš„åè®®ï¼Œå¯ä»¥ç›‘æ§ç½‘ç»œè®¾å¤‡ã€‚
   - **ä¼ è¾“å±‚**: ä¸»è¦ä½¿ç”¨UDPã€‚

Email:

1. **SMTP (Simple Mail Transfer Protocol)**:
   - **æ„ä¹‰**: å‘é€ç”µå­é‚®ä»¶çš„åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚
2. **IMAP (Internet Message Access Protocol)**:
   - **æ„ä¹‰**: ç”¨äºä»é‚®ä»¶æœåŠ¡å™¨æ£€ç´¢ç”µå­é‚®ä»¶çš„åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚
3. **POP (Post Office Protocol)**:
   - **æ„ä¹‰**: å¦ä¸€ç§ç”¨äºä»é‚®ä»¶æœåŠ¡å™¨æ£€ç´¢ç”µå­é‚®ä»¶çš„åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPã€‚

Conferencing:

1. **H.323**:
   - **æ„ä¹‰**: ç”¨äºè¯­éŸ³ã€è§†é¢‘å’Œæ•°æ®é€šä¿¡çš„ä¸€ç»„å¤šåª’ä½“åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä½¿ç”¨TCPå’ŒUDPã€‚
2. **SIP (Session Initiation Protocol)**:
   - **æ„ä¹‰**: åˆ›å»ºã€ä¿®æ”¹å’Œç»ˆæ­¢ä¼šè¯ï¼ˆå¦‚è§†é¢‘å’Œè¯­éŸ³é€šè¯ï¼‰çš„ä¿¡å·åè®®ã€‚
   - **ä¼ è¾“å±‚**: ä¸»è¦ä½¿ç”¨UDPï¼Œä½†ä¹Ÿå¯ä»¥ä½¿ç”¨TCPã€‚

# Security

â€¢ *Crypto: symmetric key,* *public key*

 symmetric key,**Only the sender and the intended receiver understands the message.* **Use the same key for encryption and decryption**å¯¹ç§°å¯†é’¥åŠ å¯†æ˜¯ä¸€ç§åŠ å¯†æ–¹æ³•ï¼Œå…¶ä¸­åŠ å¯†å’Œè§£å¯†éƒ½ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ã€‚æ•°æ®çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹å¿…é¡»å…±äº«è¿™ä¸ªå¯†é’¥æ‰èƒ½è¿›è¡Œå®‰å…¨é€šä¿¡ã€‚

*Public Key Cryptography*:åœ¨éå¯¹ç§°åŠ å¯†ä¸­ï¼Œå…¬é’¥æ˜¯å¯ä»¥å…¬å¼€çš„å¯†é’¥ï¼Œä»»ä½•äººéƒ½å¯ä»¥ç”¨å®ƒæ¥åŠ å¯†ä¿¡æ¯ï¼Œä½†åªæœ‰æŒæœ‰å¯¹åº”ç§é’¥çš„æ¥æ”¶æ–¹èƒ½è§£å¯†ã€‚

â€¢ *Authentication: to prevent playback attacks, man-in-the-middle attack*
	     â€¢ *KDC *    *Key Distribution Center*

â€‹	     â€¢ *CA* *Certification Authorities*  *binds public key to a particular entity E.*

â€¢ *Message Integrity:Authentivation with Digital signature*:æ•°å­—ç­¾å

â€¢ *Access/Availability: Firewall*

â€¢ **Firewall** *isolates an organizationâ€™s internal network from the Internet,* 

*allowing some packets to pass, while blocking others.*

â€‹		â€¢ *Prevent Denial of Service (DoS) attacks, e.g. SYN flooding.*

â€‹		â€¢ *Prevent illegal modifications/access to internal data.*

â€‹		â€¢ *Allow only authorized access to the internal network*

â€¢ **Three Types of Firewalls**

â€‹		â€¢ *Stateless Packet Filtering (packet by packet)*

â€‹		â€¢ *Stateful Packet Filtering (monitoring connections)*

â€‹		â€¢ *Application Gateways*